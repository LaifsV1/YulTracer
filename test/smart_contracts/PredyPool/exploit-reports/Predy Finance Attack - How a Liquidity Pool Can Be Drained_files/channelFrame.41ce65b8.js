(()=>{var e={18446:function(e,n,t){var o=t(90939);e.exports=function(e,n){return o(e,n)}},57824:function(e){function n(e,n,t,o){return Math.round(e/t)+" "+o+(n>=1.5*t?"s":"")}e.exports=function(e,t){t=t||{};var o,i,r,a,u=typeof e;if("string"===u&&e.length>0)return function(e){if(!((e=String(e)).length>100)){var n=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(e);if(n){var t=parseFloat(n[1]);switch((n[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*t;case"weeks":case"week":case"w":return 6048e5*t;case"days":case"day":case"d":return 864e5*t;case"hours":case"hour":case"hrs":case"hr":case"h":return 36e5*t;case"minutes":case"minute":case"mins":case"min":case"m":return 6e4*t;case"seconds":case"second":case"secs":case"sec":case"s":return 1e3*t;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return t;default:return}}}}(e);if("number"===u&&isFinite(e)){return t.long?(i=Math.abs(o=e))>=864e5?n(o,i,864e5,"day"):i>=36e5?n(o,i,36e5,"hour"):i>=6e4?n(o,i,6e4,"minute"):i>=1e3?n(o,i,1e3,"second"):o+" ms":(a=Math.abs(r=e))>=864e5?Math.round(r/864e5)+"d":a>=36e5?Math.round(r/36e5)+"h":a>=6e4?Math.round(r/6e4)+"m":a>=1e3?Math.round(r/1e3)+"s":r+"ms"}throw Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))}},30396:function(e,n,t){"use strict";t.d(n,{I4:()=>O,Me:()=>j,Qb:()=>F,Ye:()=>H,_Y:()=>g,aP:()=>S,bt:()=>b,cO:()=>P,d4:()=>y,eJ:()=>w,qp:()=>k,sO:()=>E});var o,i,r,a,u=t(6400),s=0,c=[],_=u.options,d=_.__b,l=_.__r,f=_.diffed,v=_.__c,h=_.unmount,p=_.__;function m(e,n){_.__h&&_.__h(i,e,s||n),s=0;var t=i.__H||(i.__H={__:[],__h:[]});return e>=t.__.length&&t.__.push({}),t.__[e]}function w(e){return s=1,g(D,e)}function g(e,n,t){var r=m(o++,2);if(r.t=e,!r.__c&&(r.__=[t?t(n):D(void 0,n),function(e){var n=r.__N?r.__N[0]:r.__[0],t=r.t(n,e);n!==t&&(r.__N=[t,r.__[1]],r.__c.setState({}))}],r.__c=i,!i.__f)){var a=function(e,n,t){if(!r.__c.__H)return!0;var o=r.__c.__H.__.filter(function(e){return!!e.__c});if(o.every(function(e){return!e.__N}))return!u||u.call(this,e,n,t);var i=r.__c.props!==e;return o.forEach(function(e){if(e.__N){var n=e.__[0];e.__=e.__N,e.__N=void 0,n!==e.__[0]&&(i=!0)}}),u&&u.call(this,e,n,t)||i};i.__f=!0;var u=i.shouldComponentUpdate,s=i.componentWillUpdate;i.componentWillUpdate=function(e,n,t){if(this.__e){var o=u;u=void 0,a(e,n,t),u=o}s&&s.call(this,e,n,t)},i.shouldComponentUpdate=a}return r.__N||r.__}function y(e,n){var t=m(o++,3);!_.__s&&A(t.__H,n)&&(t.__=e,t.u=n,i.__H.__h.push(t))}function b(e,n){var t=m(o++,4);!_.__s&&A(t.__H,n)&&(t.__=e,t.u=n,i.__h.push(t))}function E(e){return s=5,H(function(){return{current:e}},[])}function S(e,n,t){s=6,b(function(){if("function"==typeof e){var t=e(n());return function(){e(null),t&&"function"==typeof t&&t()}}if(e)return e.current=n(),function(){return e.current=null}},null==t?t:t.concat(e))}function H(e,n){var t=m(o++,7);return A(t.__H,n)&&(t.__=e(),t.__H=n,t.__h=e),t.__}function O(e,n){return s=8,H(function(){return e},n)}function k(e){var n=i.context[e.__c],t=m(o++,9);return t.c=e,n?(null==t.__&&(t.__=!0,n.sub(i)),n.props.value):e.__}function F(e,n){_.useDebugValue&&_.useDebugValue(n?n(e):e)}function P(e){var n=m(o++,10),t=w();return n.__=e,i.componentDidCatch||(i.componentDidCatch=function(e,o){n.__&&n.__(e,o),t[1](e)}),[t[0],function(){t[1](void 0)}]}function j(){var e=m(o++,11);if(!e.__){for(var n=i.__v;null!==n&&!n.__m&&null!==n.__;)n=n.__;var t=n.__m||(n.__m=[0,0]);e.__="P"+t[0]+"-"+t[1]++}return e.__}function x(){for(var e;e=c.shift();)if(e.__P&&e.__H)try{e.__H.__h.forEach(T),e.__H.__h.forEach(M),e.__H.__h=[]}catch(n){e.__H.__h=[],_.__e(n,e.__v)}}_.__b=function(e){i=null,d&&d(e)},_.__=function(e,n){e&&n.__k&&n.__k.__m&&(e.__m=n.__k.__m),p&&p(e,n)},_.__r=function(e){l&&l(e),o=0;var n=(i=e.__c).__H;n&&(r===i?(n.__h=[],i.__h=[],n.__.forEach(function(e){e.__N&&(e.__=e.__N),e.u=e.__N=void 0})):(n.__h.forEach(T),n.__h.forEach(M),n.__h=[],o=0)),r=i},_.diffed=function(e){f&&f(e);var n=e.__c;n&&n.__H&&(n.__H.__h.length&&(1!==c.push(n)&&a===_.requestAnimationFrame||((a=_.requestAnimationFrame)||function(e){var n,t=function(){clearTimeout(o),N&&cancelAnimationFrame(n),setTimeout(e)},o=setTimeout(t,100);N&&(n=requestAnimationFrame(t))})(x)),n.__H.__.forEach(function(e){e.u&&(e.__H=e.u),e.u=void 0})),r=i=null},_.__c=function(e,n){n.some(function(e){try{e.__h.forEach(T),e.__h=e.__h.filter(function(e){return!e.__||M(e)})}catch(t){n.some(function(e){e.__h&&(e.__h=[])}),n=[],_.__e(t,e.__v)}}),v&&v(e,n)},_.unmount=function(e){h&&h(e);var n,t=e.__c;t&&t.__H&&(t.__H.__.forEach(function(e){try{T(e)}catch(e){n=e}}),t.__H=void 0,n&&_.__e(n,t.__v))};var N="function"==typeof requestAnimationFrame;function T(e){var n=i,t=e.__c;"function"==typeof t&&(e.__c=void 0,t()),i=n}function M(e){var n=i;e.__c=e.__(),i=n}function A(e,n){return!e||e.length!==n.length||n.some(function(n,t){return n!==e[t]})}function D(e,n){return"function"==typeof n?n(e):n}},5777:function(e,n,t){"use strict";var o=t(35702),i=t(6400),r=t(68833);class a extends i.Component{componentDidMount(){let{likelyLoggedIn:e,loggedInSubscriberStat:n}=this.props.initialData;this.post({type:"frame-state",loggedInAtSubstack:!!e,subscriberState:n}),(0,r.j)(r.FP.FRAME_MESSAGE_SENT,{hasUserState:!!n})}post(e){var n,t;let{protocol:o,port:i}=window.location,r=null===(n=this.props.initialData)||void 0===n?void 0:n.targetOrigin,a=(null==r?void 0:r.startsWith("http"))?r:"".concat(o,"//").concat(r).concat(i?":".concat(i):"");null===(t=window.top)||void 0===t||t.postMessage(e,a)}render(){return""}}(0,o.Z)(a)},68833:function(e,n,t){"use strict";t.d(n,{FP:()=>o.FP,j:()=>o.j,uF:()=>i.S}),t(47102),t(55229);var o=t(8090),i=t(53516)},8090:function(e,n,t){"use strict";t.d(n,{FP:()=>p,Kl:()=>b,Md:()=>P,j:()=>H});var o,i,r=t(21811),a=t(15872),u=t(55229),s=t(43300),c=t(49762),_=t(96708),d=t(98914);t(98012);var l=t(37313),f=t(60308),v=t(26111),h=t(41935);let p=l.F,m="undefined"!=typeof window,w=!!(m&&window.navigator&&window.navigator.sendBeacon),g=!(0,d.w1)()&&w,y=new s.T({batchOptions:g?{maxBatchSize:8,maxBatchDataSize:1e4}:void 0,send:function(e,n){m&&(g&&n&&e.push(x(e,n)),new Image().src=(0,f.n1t)(g?"/api/v1/firehose/batch":"/api/v1/firehose",{_:new Date().getTime(),d:e.join(",")}))},beacon:function(e,n){if(!m)return;e.push(x(e,"beacon",n));let t=new Blob([JSON.stringify(e)],{type:"application/json"});navigator.sendBeacon("/api/v1/firehose/batch",t)}}),b=()=>{m&&g&&(window.addEventListener("beforeunload",e=>{y.sendBeacon(e)}),window.addEventListener("pagehide",e=>{y.sendBeacon(e)}),document.addEventListener("visibilitychange",e=>{"hidden"===document.visibilityState&&y.sendBeacon(e)}),setInterval(()=>{y.intervalFlush()},6e4))},E=m&&window!=window.top&&(0,h.l)(d.EH),S="browser";function H(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};try{var t;if(["development","test"].includes((t="production",void 0!==t)?t:"")&&!e)throw Error("`undefined` event passed to FRONTEND track call");N(e,Object.assign({},n))}catch(e){try{window.Sentry&&window.Sentry.captureException(e)}catch(n){console.error("Failed to track event",e)}}}m&&(navigator.standalone||(null===(o=(i=window).matchMedia)||void 0===o?void 0:o.call(i,"(display-mode: standalone)").matches))&&(S="standalone");let O=()=>document.location.pathname.startsWith("/p/"),k=()=>{var e,n,t;let o=window._preloads,i=(null==o?void 0:null===(e=o.post)||void 0===e?void 0:e.id)&&(null==o?void 0:o.pub),r=!!(null==o?void 0:null===(n=o.post)||void 0===n?void 0:n.slug)&&(null==o?void 0:null===(t=o.post)||void 0===t?void 0:t.slug)===document.location.pathname.split("/")[document.location.pathname.split("/").length-1];return!!(i&&O()&&r)},F=e=>e?e.is_subscribed?"Paid subs":e.is_free_subscribed?"Free subs":"Anonymous":"Anonymous";function P(){var e,n,t;let o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(document.location.pathname.startsWith("/embed")&&m&&(null===(t=window)||void 0===t?void 0:null===(n=t._preloads)||void 0===n?void 0:null===(e=n.pub)||void 0===e?void 0:e.embed_tracking_disabled))return;N(p.PAGES,Object.assign(function(){let e={};if(m){let n=window._preloads&&"post"in window._preloads&&window._preloads.post,t=window.location&&/^\/p\/([^\/]+)/.exec(window.location.pathname);t&&n&&t[1]===n.slug&&(e.post_id=n.id,e.post_audience=n.audience,e.post_type=n.type)}return e}(),o));let i=(0,u.xL)();if(i&&(new Image().src="https://www.facebook.com/tr?id=".concat(i,"&ev=PageView")),(0,_.g)("pageview"),(0,u.XY)("pageview"),(0,u.Hx)("page_view"),m&&window.PARSELY&&window.PARSELY.loaded&&window.PARSELY.beacon&&window.PARSELY.beacon.trackPageView){let e={url:document.location.origin+document.location.pathname+document.location.search,urlref:document.referrer||"",js:1,data:{}};if((0,c.default)("add_section_and_tag_metadata")){if(O()&&!k())return;if(O()){let n=window._preloads;e.data={audience:F(null==n?void 0:n.user)}}}window.PARSELY.beacon.trackPageView(e)}}function j(e){var n,t,o,i,u,s,c,_,l;let f=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},h=null;try{h=Intl.DateTimeFormat().resolvedOptions().timeZone}catch(e){}let p={event:e,timestamp:new Date().toISOString(),properties:Object.assign({browserSessionId:a.W,iframeVisitId:E,r:(0,v.x)("r"),magicUserId:"undefined"!=typeof window&&(null===(o=window)||void 0===o?void 0:null===(t=o._preloads)||void 0===t?void 0:null===(n=t.user)||void 0===n?void 0:n.is_magic)?window._preloads.user.id:void 0},f),context:{client_type:"web",displayMode:S,page:{referrer:document.referrer,title:document.title,url:document.location.href,height:null!==(s="undefined"!=typeof window&&window.innerHeight)&&void 0!==s?s:0,width:null!==(c="undefined"!=typeof window&&window.innerWidth)&&void 0!==c?c:0},campaign:(0,r.l)(),timezone:h,screen:{height:null!==(_="undefined"!=typeof window&&(null===(i=window.screen)||void 0===i?void 0:i.height))&&void 0!==_?_:0,width:null!==(l="undefined"!=typeof window&&(null===(u=window.screen)||void 0===u?void 0:u.width))&&void 0!==l?l:0}}};return(0,d.m)(JSON.stringify(p))}function x(e,n,t){let o=e.length,i=e.map(e=>e.length).reduce((e,n)=>e+n,0);return j(p.FIREHOSE_BATCH_SENT,{dataSize:i,batchSize:o,batchType:n,eventType:null==t?void 0:t.type})}function N(e){var n,t,o;let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if("undefined"==typeof window||"undefined"==typeof document)return;let r=j(e,i);y.add(r),(null===(o=window)||void 0===o?void 0:null===(t=o._preloads)||void 0===t?void 0:null===(n=t.user)||void 0===n?void 0:n.is_global_admin)&&console.log("EVENT: ".concat(e),i)}},35934:function(e,n,t){"use strict";t.d(n,{gz:()=>i});var o=t(27412);class i extends Error{constructor(e,n={},t=!1,i=null){let r,a;super(e),(0,o._)(this,"status",void 0),(0,o._)(this,"userVisible",void 0),(0,o._)(this,"messageHtml",void 0),(0,o._)(this,"response",void 0),(0,o._)(this,"type",void 0),(0,o._)(this,"metadata",void 0),this.name=this.constructor.name;let u=null,s=null,c=null;if("object"==typeof n){var _,d,l,f,v,h;r=null!==(_=n.status)&&void 0!==_?_:500,t=null!==(d=n.userVisible)&&void 0!==d&&d,i=null!==(l=n.messageHtml)&&void 0!==l?l:null,u=null!==(f=n.responseBody)&&void 0!==f?f:null,s=null!==(v=n.type)&&void 0!==v?v:null,c=null!==(h=n.metadata)&&void 0!==h?h:null}else r=n;this.status=r,this.userVisible=!!u||t,this.messageHtml=i,this.type=s,this.metadata=c,u?a=u:this.userVisible?i?a={errors:[{msg:e,msgHTML:i}],type:"list"}:(a={error:e,type:"single"},this.type&&(a.type=this.type),this.metadata&&(a.metadata=this.metadata)):a={error:""},this.response={body:a},Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)}}}},n={};function t(o){var i=n[o];if(void 0!==i)return i.exports;var r=n[o]={id:o,loaded:!1,exports:{}};return e[o].call(r.exports,r,r.exports,t),r.loaded=!0,r.exports}t.m=e,t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,{a:n}),n},t.d=function(e,n){for(var o in n)t.o(n,o)&&!t.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:n[o]})},t.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||Function("return this")()}catch(e){if("object"==typeof window)return window}}(),t.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.nmd=function(e){return e.paths=[],e.children||(e.children=[]),e},(()=>{var e=[];t.O=function(n,o,i,r){if(o){r=r||0;for(var a=e.length;a>0&&e[a-1][2]>r;a--)e[a]=e[a-1];e[a]=[o,i,r];return}for(var u=1/0,a=0;a<e.length;a++){for(var o=e[a][0],i=e[a][1],r=e[a][2],s=!0,c=0;c<o.length;c++)(!1&r||u>=r)&&Object.keys(t.O).every(function(e){return t.O[e](o[c])})?o.splice(c--,1):(s=!1,r<u&&(u=r));if(s){e.splice(a--,1);var _=i();void 0!==_&&(n=_)}}return n}})(),t.rv=function(){return"1.2.5"},(()=>{var e={1834:0};t.O.j=function(n){return 0===e[n]};var n=function(n,o){var i,r,a=o[0],u=o[1],s=o[2],c=0;if(a.some(function(n){return 0!==e[n]})){for(i in u)t.o(u,i)&&(t.m[i]=u[i]);if(s)var _=s(t)}for(n&&n(o);c<a.length;c++)r=a[c],t.o(e,r)&&e[r]&&e[r][0](),e[r]=0;return t.O(_)},o=self.webpackChunksubstack=self.webpackChunksubstack||[];o.forEach(n.bind(null,0)),o.push=n.bind(null,o.push.bind(o))})(),t.ruid="bundler=rspack@1.2.5";var o=t.O(void 0,["335","6574","7536","2664","3586","3834","7680","814","7706","1542"],function(){return t(5777)});o=t.O(o)})();