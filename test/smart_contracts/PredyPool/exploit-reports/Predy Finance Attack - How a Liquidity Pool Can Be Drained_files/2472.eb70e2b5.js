"use strict";(self.webpackChunksubstack=self.webpackChunksubstack||[]).push([["2472"],{44854:function(t,e,n){n.d(e,{Z:()=>r});let r={root:"root-MjHNqP",isOnInbox:"isOnInbox-pP0vQF",paywallStack:"paywallStack-RdkSad",pubChatColumn:"pubChatColumn-Zck7MX",pubChatFull:"pubChatFull-tEPJ4X",submit:"submit-T76OjY",inactive:"inactive-RF_jH9",chatPublicationContainer:"chatPublicationContainer-y1FRFU",invitesRow:"invitesRow-QZEeej",show:"show-vL_rsU",unfurl:"unfurl-n5q4dW",sticky:"sticky-ykmBOy",unreadDot:"unreadDot-fNgNDl",unreadTabDot:"unreadTabDot-aqz7wG",selected:"selected-oDAfJA",currentVisibilityBox:"currentVisibilityBox-VAGH9Q",headerPubLink:"headerPubLink-uygNA1",sidebarRowTitle:"sidebarRowTitle-wepYF4",headerPubAvatar:"headerPubAvatar-jFmd9c",inputBox:"inputBox-UuLYvf",modalContext:"modalContext-nC14Y0",textInputInset:"textInputInset-jnSii9",invisible:"invisible-AW4ANv",textInput:"textInput-zlmYim",dropzone:"dropzone-W750JH",submitButton:"submitButton-_zJ5fy",newThreadButton:"newThreadButton-POT_Ph",roundedFooterPlaceholder:"roundedFooterPlaceholder-k7TSWJ",chatContainer:"chatContainer-fnFgIy",fade:"fade-HKCqnN",composerLinkPreview:"composerLinkPreview-cBU00h",composer:"composer-rYAaNa",imageBox:"imageBox-NAFgde",image:"image-PfNhry",deleteFile:"deleteFile-gv_fWj",modalColumn:"modalColumn-fVvKpE",visibilityDropdown:"visibilityDropdown-mnqCEz",visibilityDropdownText:"visibilityDropdownText-uW5qxU",messageSquareIcon:"messageSquareIcon-_NUoeX",paywall:"paywall-hfm67h",modalChatEditor:"modalChatEditor-bbcasD",newText:"newText-IkD33N",newBorder:"newBorder-fycRk_",jumpButton:"jumpButton-yc047J",jumpBadge:"jumpBadge-IO2hJP"}},4473:function(t,e,n){n.d(e,{Z:()=>c});var r=n(7409),o=n(99282),i=n(98848),a=n(16584),l=n(64515);let c=t=>{var{size:e=24,fill:n="var(--color-fg-primary)",className:c}=t,s=(0,i._)(t,["size","fill","className"]);return(0,a.BX)(l.l,(0,o._)((0,r._)({},s),{name:"SubstackIcon",svgParams:{viewBox:"0 0 20 20"},width:e,height:e,fill:n,stroke:"none",className:c,children:[(0,a.tZ)("path",{d:"M1.96484 0.624512H18.0354V2.70052H1.96484V0.624512Z",stroke:"none"}),(0,a.tZ)("path",{d:"M1.96484 4.77655H18.0354V6.85254H1.96484V4.77655Z",stroke:"none"}),(0,a.tZ)("path",{d:"M1.96484 8.92857V19.9505L10.0001 14.6347L18.0354 19.9505V8.92857H1.96484Z",stroke:"none"})]}))}},3258:function(t,e,n){n.d(e,{ZP:()=>g,wg:()=>v});var r=n(7409),o=n(99282),i=n(16584),a=n(94184),l=n.n(a),c=n(80569),s=n.n(c),d=n(85685),u=n(85095),m=n(33017),h=n(63651),p=n(51885);let g=t=>{let{id:e,type:n,name:r,url:o,photo_url:a,uuid:c,mentionText:s,isStatic:g=!1,isEditorContext:f=!1}=t;return g?(0,i.tZ)("span",{className:l()(p.Z.mention,p.Z.mentionStatic),"data-component-name":"MentionStatic",children:(0,i.tZ)("a",{href:(0,h.gpq)(n,e,r,o),children:r||"Substack user"})}):"user"===n?(0,i.tZ)(u.am,{children:(0,i.tZ)(d.ProfileHoverCard,{subject:{id:e,name:r||"Substack user",photo_url:a},utmSource:"mention",children:(0,i.tZ)("a",{className:p.Z.mention,href:f?void 0:(0,h.gpq)(n,e,r,o),target:"_blank",rel:"noopener","data-attrs":JSON.stringify({name:r,id:e,type:n,url:o,photo_url:a,uuid:c}),onClick:t=>t.stopPropagation(),"data-component-name":"MentionUser",children:null!=s?s:r})})}):"pub"===n?(0,i.tZ)(m.Sm,{publication_id:e,utmSource:"mention",children:(0,i.tZ)("a",{className:p.Z.mention,href:o,target:"_blank",rel:"noopener","data-attrs":JSON.stringify({name:r,id:e,type:n,url:f?void 0:(0,h.gpq)(n,e,r,o),uuid:c}),onClick:t=>t.stopPropagation(),"data-component-name":"MentionPub",children:null!=s?s:r})}):(0,i.tZ)("a",{className:p.Z.mention,target:"_blank",rel:"noopener",href:(0,h.gpq)(n,e,r,o),"data-attrs":JSON.stringify({name:r,id:e,type:n,url:o,photo_url:a,uuid:c}),"data-component-name":"Mention",children:null!=s?s:r})},f={},v=async function(t){let{pathname:e="/api/v1/posts/mention"}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(f[t])return f[t];let{profiles:n,publications:i}=(await s().get(e).query({query:t,include_unmentionables:!0})).body,a=new Map;return n&&n.length&&a.set("Writers",n.map(t=>(0,o._)((0,r._)({},t),{type:"user",disabledReason:t.is_mentionable?void 0:"unmentionable"}))),i&&i.length&&a.set("Publications",null==i?void 0:i.map(t=>(0,o._)((0,r._)({},t),{type:"pub",url:(0,h.HQ5)({subdomain:t.subdomain}),photo_url:t.logo_url}))),f[t]=a,a}},77906:function(t,e,n){n.d(e,{UK:()=>x});var r=n(7409),o=n(99282),i=n(58865),a=n(16584),l=n(20160),c=n(95441),s=n(92291),d=n(77338),u=n(5952),m=n(79251),h=n(25991),p=n(53678),g=n(76721),f=n(93252),v=n(94874),y=n(19081),b=n(58175),_=n(87989),Z=n(2009),w=n(50312),k=n(63651),B=n(47929),C=n(5749);function S(){let t=(0,i._)(["This content is only visible to paid subscribers of ",""]);return S=function(){return t},t}function x(t){let{parent:e,comment:n,publication:r,readOnly:o,onAttachmentClick:i,utm_content:c,isDm:s,isPermalink:d}=t,u=(0,w.F)({onClick:()=>null==i?void 0:i({commentId:String(n.id)}),href:o?void 0:(0,k.Sgq)(n,{noBase:Z.L}),state:{showBack:!0}});return(0,a.tZ)(l.W,{children:(0,a.tZ)(P,{readOnly:o,linkProps:u,isEmbed:f.P,children:(0,a.tZ)(T,{parent:e,comment:n,publication:r,readOnly:o,onAttachmentClick:i,utm_content:c,isDm:s,isPermalink:d})})})}function P(t){let{children:e,readOnly:n,linkProps:i,isEmbed:l}=t;return(0,a.tZ)(y.tu,(0,o._)((0,r._)({as:n?"div":"a",bg:"primary",border:"detail",radius:"md",padding:12,gap:8,target:l()?"_blank":void 0,draggable:!1},i),{showFocus:!0,animate:!0,className:C.Z.commentContainer,children:e}))}function T(t){var e,n,r;let{parent:o,comment:i,publication:l,readOnly:c,onAttachmentClick:s,utm_content:d,isDm:u,isPermalink:m}=t,{truncatedBodyJson:h}=(0,g.Z)(i,{truncationProfile:"small"}),p=null!==(r=i.user)&&void 0!==r?r:i.user_id?{id:i.user_id,name:null!==(e=i.name)&&void 0!==e?e:"",photo_url:i.photo_url,bestseller_tier:null!==(n=i.user_bestseller_tier)&&void 0!==n?n:void 0}:null;return(0,a.BX)(a.HY,{children:[p&&(0,a.tZ)(I,{commentUser:p,comment:i,readOnly:c,utm_content:d}),(0,a.tZ)(F,{parent:o,comment:i,publication:l,truncatedBodyJson:h,isDm:u,onAttachmentClick:s,utm_content:d,readOnly:c,isPermalink:m})]})}function I(t){let{commentUser:e,comment:n,readOnly:r,utm_content:o}=t;return e?(0,a.BX)(y.hs,{gap:6,alignItems:"center",justifyContent:"start",children:[(0,a.tZ)(w.r,{href:(0,k.NNq)(e,{noBase:Z.L,utm_content:B.fZ.substackFeedItem,utm_source:null!=o?o:void 0}),target:(0,f.P)()?"_blank":void 0,showBack:!0,radius:"full",showFocus:!0,animate:!0,children:(0,a.tZ)(v.qE,{size:20,user:e})}),(0,a.tZ)(b.xv.B4,{weight:"medium",color:"primary",children:r?e.name:(0,a.BX)(y.hs,{gap:8,direction:"row",justifyContent:"space-between",children:[(0,a.tZ)(p.xG,{user:e,utm_source:B.b3.substackFeedItem,utm_content:o,children:e.name}),(null==e?void 0:e.bestseller_tier)!=null&&(0,a.tZ)(_.UserBadge,{tier:e.bestseller_tier,userId:e.id,tooltipOnHover:!0,size:"sm"})]})}),(0,a.tZ)(b.xv.B4,{as:"span",color:"secondary",children:(0,a.tZ)(h.mn,{timestamp:n.date,comment:n})})]}):null}function F(t){var e,n,r,o,i;let{parent:l,comment:s,publication:d,truncatedBodyJson:u,isDm:m,isPermalink:h,readOnly:p,onAttachmentClick:g,utm_content:f}=t,{iString:v,iTemplate:y}=(0,c.M1)(),b=null!==(i=null==d?void 0:d.name)&&void 0!==i?i:v("this publication"),_=y(S(),b),Z=null==l?void 0:null===(e=l.attachments)||void 0===e?void 0:e.some(t=>"image"===t.type||"video"===t.type),w=null===(n=s.attachments)||void 0===n?void 0:n.some(t=>"image"===t.type||"video"===t.type),k=null===(r=s.attachments)||void 0===r?void 0:r.some(t=>"image"!==t.type&&"video"!==t.type&&"live_stream"!==t.type),B=null===(o=s.attachments)||void 0===o?void 0:o.some(t=>"post"===t.type&&t.postSelection),C=!1;return Z||w&&k||k&&!B?(0,a.tZ)(N,{comment:s,truncatedBodyJson:u,hiddenText:_,onAttachmentClick:g,utm_content:f}):(0,a.tZ)(H,{comment:s,truncatedBodyJson:u,hiddenText:_,onAttachmentClick:g,utm_content:f,readOnly:p,isDm:m,isPermalink:h})}function N(t){var e,n;let{comment:r,truncatedBodyJson:o,hiddenText:i,onAttachmentClick:l,utm_content:c}=t;return(0,a.tZ)(a.HY,{children:(0,a.BX)(y.hs,{gap:8,direction:"row",flex:"grow",justifyContent:"space-between",children:[(0,a.BX)(y.tu,{gap:4,children:[(0,a.tZ)(d.h,{content:o,isHidden:r.hidden,hiddenText:i,attachedLinks:(0,u.Bk)(r)}),(0,a.tZ)(m.Mi,{attachments:null!==(e=r.attachments)&&void 0!==e?e:[],onAttachmentClick:l,utm_content:c})]}),(0,a.tZ)(s.Gn,{attachments:null!==(n=r.attachments)&&void 0!==n?n:[]})]})})}function H(t){var e;let{comment:n,truncatedBodyJson:r,hiddenText:o,onAttachmentClick:i,utm_content:l,readOnly:c,isDm:m,isPermalink:h}=t;return(0,a.BX)(a.HY,{children:[(0,a.tZ)(d.h,{content:r,isHidden:n.hidden,hiddenText:o,attachedLinks:(0,u.Bk)(n)}),(0,a.tZ)(s.yd,{attachments:null!==(e=n.attachments)&&void 0!==e?e:[],onAttachmentClick:i,utm_content:l,isRestack:!0,readOnly:c,isDm:m,isPermalink:h})]})}},17352:function(t,e,n){n.d(e,{Z:()=>Z});var r=n(7409),o=n(99282),i=n(98848),a=n(16584),l=n(70843),c=n(98661),s=n(20160),d=n(71068),u=n(15771),m=n(19081),h=n(1844),p=n(68709),g=n(98248),f=n(63474),v=n(58175),y=n(87077),b=n(52434);let _=()=>(0,a.tZ)(m.sg,{flex:"grow",justifyContent:"center",alignItems:"center",children:(0,a.tZ)(g.$j,{})}),Z=t=>{var e,n,{children:l,gap:u=8,direction:m="column",radius:h="md",outline:p="detail",bg:g="primary",elevated:v=!0,loading:y,href:b,onClick:Z}=t,w=(0,i._)(t,["children","gap","direction","radius","outline","bg","elevated","loading","href","onClick"]);let k=b||Z,B=v?s.W:c.Fragment,C=(0,a.tZ)(d.xu,(0,o._)((0,r._)({display:"flex",sizing:"border-box",direction:m,bg:g,outline:p,radius:h,gap:u,shadow:null!==(e=w.shadow)&&void 0!==e?e:v?"xs":void 0,pressable:null!==(n=w.pressable)&&void 0!==n?n:k?"lg":void 0},w),{children:y?(0,a.tZ)(_,{}):l}));return(0,a.tZ)(B,{children:k?(0,a.tZ)(f.A0,{href:b,onClick:Z,children:C}):C})};Z.Title=t=>{let{children:e}=t;return(0,a.tZ)(p.__,{children:e})},Z.Header=t=>{let{children:e}=t;return(0,a.tZ)(m.X2,{justifyContent:"space-between",gap:12,paddingTop:20,paddingX:20,children:e})},Z.Body=t=>{var{children:e}=t,n=(0,i._)(t,["children"]);return(0,a.tZ)(m.sg,(0,o._)((0,r._)({paddingX:20},n),{children:e}))},Z.Footer=t=>{let{children:e}=t;return(0,a.tZ)(m.sg,{paddingBottom:20,paddingX:20,children:e})},Z.Description=t=>{let{children:e}=t;return(0,a.tZ)(h.p6,{children:e})},Z.Loading=_,Z.Value=t=>{let{children:e,size:n="md"}=t,r="sm"===n?v.xv.H3:v.xv.H2;return(0,a.tZ)(r,{className:b.Z.value,children:e})},Z.Tooltip=t=>{let{title:e,text:n,disabled:r}=t;return(0,a.tZ)(y.u,{title:e,text:n,disabled:r,hoverOptions:{delayEnter:250},children:(0,a.tZ)(m.M5,{width:20,height:20,children:(0,a.tZ)(u.hU,{priority:"quaternary",size:"xs",children:(0,a.tZ)(l.Z,{size:16})})})})}},1669:function(t,e,n){n.d(e,{o:()=>a});var r=n(16584),o=n(98914),i=n(58175);let a=t=>{let{error:e}=t,n=(0,o.HM)(e);return(null==n?void 0:n.html)?(0,r.tZ)(i.xv.B4,{weight:"medium",color:"error",dangerouslySetInnerHTML:{__html:n.html}}):(0,r.tZ)(i.xv.B4,{weight:"medium",color:"error",children:(null==n?void 0:n.msg)||"Something went wrong"})}},76566:function(t,e,n){n.d(e,{S:()=>u});var r=n(27412),o=n(16584),i=n(20042),a=n(98661),l=n(20888),c=n(9682),s=n(19081),d=n(58175);class u extends a.Component{static getDerivedStateFromError(t){return{error:t}}componentDidMount(){Promise.all([n.e("7152"),n.e("6993")]).then(n.bind(n,91985)).then(t=>{this.Sentry=t.Sentry})}componentDidCatch(t){console.error(t),this.Sentry&&this.Sentry.captureException(t)}render(){let{error:t}=this.state;return(0,o.tZ)(m,{onReset:()=>this.setState({error:null}),error:t,children:t?(0,o.tZ)(h,{}):this.props.children})}constructor(t){super(t),(0,r._)(this,"Sentry",null),this.state={error:null}}}function m(t){let{onReset:e,error:n,children:r}=t,l=(0,a.useRef)((0,i.getCurrentUrl)());return(0,c.js)(t=>{n&&l.current!==t&&e(),l.current=t},[]),n?(0,o.tZ)(h,{}):r}function h(){return(0,o.BX)(s.tu,{flex:"grow",justifyContent:"center",alignItems:"center",gap:32,padding:20,children:[(0,o.tZ)(l.e,{src:"/img/reader/toad.png",maxWidth:200}),(0,o.BX)(s.tu,{gap:8,children:[(0,o.tZ)(d.xv.H3,{weight:"semibold",align:"center",children:"Oh noâ€”this page croaked."}),(0,o.tZ)(d.xv.B3,{color:"secondary",align:"center",children:"Try again, or hop to another page."})]})]})}},50312:function(t,e,n){n.d(e,{F:()=>h,r:()=>m});var r=n(7409),o=n(99282),i=n(98848),a=n(16584),l=n(98661),c=n(20042),s=n(21811),d=n(93252),u=n(71068);let m=(0,l.forwardRef)((t,e)=>{var{href:n,onClick:l,campaign:c,replace:s,state:d,showBack:m}=t,p=(0,i._)(t,["href","onClick","campaign","replace","state","showBack"]);let g=h({href:n,onClick:l,campaign:c,replace:s,state:d=m?(0,o._)((0,r._)({},d),{showBack:!0}):d});return(0,a.tZ)(u.xu,(0,r._)((0,o._)((0,r._)({as:"a"},p),{ref:e}),g))});function h(t){let{onClick:e,href:n,campaign:o,replace:i,state:a}=t;if(n&&!(0,d.P)()){let t;try{t=new URL(n)}catch(e){try{t=new URL("".concat(document.location.origin).concat(n))}catch(t){}}if(t){if(t.origin!==document.location.origin||o){if(t.origin!==document.location.origin&&o){for(let[e,n]of Object.entries(o)){let r="name"===e?"campaign":e;t.searchParams.set("utm_".concat(r),n)}n=t.toString()}}else{let e=new URLSearchParams,r={};for(let[n,o]of t.searchParams)n.startsWith("utm_")?"utm_campaign"===n?r.name=o:r[n.replace(/^utm_/,"")]=o:e.append(n,o);o=r,n="".concat(t.pathname,"?").concat(e)}}}return{href:n,onClick:t=>{if(null==e||e(t),!t.ctrlKey&&!t.shiftKey&&!t.metaKey&&n&&!(0,d.P)()){if(t.defaultPrevented){t.stopPropagation();return}(0,s.j)((0,r._)({},o)),t.preventDefault(),t.stopPropagation(),(0,c.route)(n,i),a&&history.replaceState(a,"")}}}}},41233:function(t,e,n){n.d(e,{LZ:()=>b,et:()=>_,fA:()=>v});var r=n(7409),o=n(99282),i=n(16584),a=n(95441),l=n(17625),c=n(80026),s=n(6490),d=n(65523),u=n(4354),m=n(65942),h=n(23276),p=n(9003),g=n(24142),f=n(91400);function v(t){let{onCancel:e,onSuccess:n,onSignup:r,onUserCreated:o,noCloseButton:a,noExit:c,isOpen:d,redirectOverride:m,overrideTitle:h}=t,p=(0,f.XA)();return(0,i.tZ)(s.u_,{onClose:e,isOpen:d,children:(0,i.BX)(u.t,{children:[(0,i.tZ)(y,{onCancel:e,onSuccess:n,onSignup:r,onUserCreated:o,noCloseButton:a,noExit:c,redirectOverride:m,overrideTitle:h}),p&&(0,i.tZ)(l.o$,{})]})})}function y(t){let{onCancel:e,onSuccess:n,onSignup:a,onUserCreated:l,noCloseButton:c,noExit:s,redirectOverride:d,overrideTitle:f}=t,{mode:v}=(0,u.I)(),y={overrideTitle:f,noCloseButton:c||s,onCancel:e,onSignup:a};return(0,i.BX)(i.HY,{children:["magic-link"===v&&(0,i.tZ)(m.v,(0,o._)((0,r._)({},y),{onSuccess:n})),"email"===v&&(0,i.tZ)(h.j,(0,o._)((0,r._)({},y),{onUserCreated:l,redirectOverride:d})),"password"===v&&(0,i.tZ)(g.L,(0,o._)((0,r._)({},y),{onSuccess:n})),"mfa"===v&&(0,i.tZ)(p.n,{onSuccess:n})]})}let b=t=>{let{overrideTitle:e,noCloseButton:n,onCancel:r,onSignup:o}=t,{iString:l}=(0,a.M1)();return(0,i.tZ)(d.xB,{title:e||l("Sign in to Substack"),description:o?(0,i.BX)(i.HY,{children:[l("First time here? "),(0,i.tZ)(c.hh,{color:"substack",decoration:"hover-underline",onClick:o,cursor:"pointer",children:l("Create account")})]}):void 0,showClose:!n,onClose:r,icon:(0,i.tZ)(d.ZN,{}),alignItems:"center"})},_=t=>{let{children:e}=t;return(0,i.tZ)(c.sg,{padding:16,borderTop:"detail",children:(0,i.tZ)(c.xv.B4,{as:"span",color:"secondary",align:"center",children:e})})}},16913:function(t,e,n){n.d(e,{E:()=>u});var r=n(16584),o=n(95441),i=n(80026),a=n(98012);let l=new Intl.DateTimeFormat(void 0,{timeStyle:"short"}),c=new Intl.DateTimeFormat(void 0,{weekday:"long"}),s=new Intl.DateTimeFormat(void 0,{month:"short",day:"numeric"}),d=new Intl.DateTimeFormat(void 0,{dateStyle:"long"});function u(t){let{timestamp:e,conjunction:n=!1}=t,{iString:u,language:m}=(0,o.M1)(),h=new Date(e),p=(0,a.Z)(),g=m.startsWith("en"),f=p.isSame(h,"day")?u("Today"):p.subtract(1,"day").isSame(h,"day")?u("Yesterday"):p.isSame(h,"week")?c.format(h):p.isSame(h,"year")?s.format(h):d.format(h);return(0,r.tZ)(i.X2,{alignItems:"center",justifyContent:"center",children:(0,r.BX)(i.xv.B4,{color:"secondary",children:[f,n&&g?" at ":" ",l.format(h)]})})}},69304:function(t,e,n){n(16584),n(19081),n(58175),n(44854)},32223:function(t,e,n){n.d(e,{c:()=>s});var r=n(7409),o=n(98848),i=n(16584),a=n(77747),l=n(80026),c=n(23710);function s(t){var{children:e,setReactions:n=!0,alignSelf:l}=t,c=(0,o._)(t,["children","setReactions","alignSelf"]);return n?(0,i.BX)(d,{position:"relative",alignSelf:l,children:[e,(0,i.tZ)(a.Jg,(0,r._)({},c))]}):(0,i.tZ)(i.HY,{children:e})}let d=(0,l.E7)({display:"flex",className:c.Z.reactionsHoverZone})},93502:function(t,e,n){n(48980)},11308:function(t,e,n){n.d(e,{o:()=>c});var r=n(7409),o=n(99282),i=n(79094),a=n(48980),l=n(97842);function c(t){let{entityType:e,publication:n}=t,a=(0,i.T)(),c=(0,l.I0)();return(t,i)=>{a({onSubmit:n=>c("communityPost"===e?s((0,o._)((0,r._)({},n),{id:t})):d((0,o._)((0,r._)({},n),{id:t}))),canReportToAdmins:!!(n&&i&&n.moderation_enabled),pub:null!=n?n:void 0})}}let s=t=>{let{id:e,details:n,reportCategory:r,reportedToSubstack:o}=t;return async t=>{t({type:"posts-flag_post",payload:{id:e}});let i=await u({id:e,details:n,reportCategory:r,reportedToSubstack:o});i instanceof Error&&console.warn("error flagging post",i)}},d=t=>{let{id:e,details:n,reportCategory:r,reportedToSubstack:o}=t;return async t=>{t({type:"comments-flag_comment",payload:{id:e}});let i=await m({id:e,details:n,reportCategory:r,reportedToSubstack:o});i instanceof Error&&console.warn("error flagging comment",i)}};async function u(t){let{id:e,details:n,reportCategory:r,reportedToSubstack:o}=t;try{return await (0,a.rd)("/api/v1/community/posts/".concat(e,"/reports"),{method:"POST",json:{postId:e,details:n,reportCategory:r,reportedToSubstack:o}})}catch(t){return t}}async function m(t){let{id:e,details:n,reportCategory:r,reportedToSubstack:o}=t;try{return await (0,a.rd)("/api/v1/community/comments/".concat(e,"/reports"),{method:"POST",json:{commentId:e,details:n,reportCategory:r,reportedToSubstack:o}})}catch(t){return t}}},65958:function(t,e,n){n.d(e,{s:()=>p});var r=n(7409),o=n(99282),i=n(16584),a=n(48980),l=n(80878),c=n(7882),s=n(70379),d=n(97842),u=n(95551),m=n(62515),h=n(36186);function p(t){let{source:e}=t,n=function(t){let{source:e}=t,n=(0,d.I0)(),i=(0,c.ib)({pathname:"/api/v1/messages/dm/start",method:"POST"}),a=async t=>{let r=await i.refetch({json:{user_ids:t,source:e}});return r instanceof Error||n({type:"conversation-load_more",payload:{edge:"before",cursor:null,page:r}}),r};return(0,o._)((0,r._)({},i),{handleStart:a})}({source:e}),p=(0,u.d)(),g=(0,s.pm)(),f=async t=>{var e;let c=await n.handleStart(t);return c instanceof Error?(c instanceof a.kp&&(null===(e=c.body)||void 0===e?void 0:e.type)==="profile_not_set_up"?g.popToast(t=>(0,i.tZ)(s.FN,(0,o._)((0,r._)({},t),{text:"Please set up your profile before sending a message.",cta:"Set up profile",href:(0,h.Nh)({utm_source:"substack",utm_campaign:"chat_dm_button",redirect:window.location}),localNavigation:!1}))):p(c,"Could not start conversation."),!1):((0,l._)((0,m.Rm)(c.thread.id)),!0)};return(0,o._)((0,r._)({},n),{handleStart:f})}},32189:function(t,e,n){n.d(e,{x:()=>l});var r=n(30396),o=n(60807),i=n(68833),a=n(81043);function l(t){let{surface:e,zIndex:n=null}=t,l=(0,o.aF)(),{onboardingModalRef:c}=(0,a.SJ)();return(0,r.d4)(()=>{c.current&&null!==n&&(c.current.props.zIndex=n)},[c,n]),(t,n)=>r=>{if(!t){console.warn("No publication provided to usePubOnboardingHandler handler");return}if(!l){var o,a;if(!c.current)return;r.preventDefault(),n?null===(o=c.current)||void 0===o||o.openForPub(t,n):null===(a=c.current)||void 0===a||a.openToPubSignup(t);return}(0,i.x6)(t,e)}}}}]);