"use strict";(self.webpackChunksubstack=self.webpackChunksubstack||[]).push([["3889"],{29439:function(e,t,n){n.d(t,{Z:()=>i});let i={link:"link-LIBpto"}},95738:function(e,t,n){n.d(t,{Z:()=>i});let i={videoPlayer:"videoPlayer-AdXrEr",videoPlayerContainer:"videoPlayerContainer-rPl28G",tagContainer:"tagContainer-S_oHWt"}},31122:function(e,t,n){n.d(t,{Y:()=>B});var i=n(7409),l=n(16584),r=n(98661),o=n(94184),a=n.n(o),c=n(23260),d=n(45790),u=n(29032),s=n(47348),m=n(60807),v=n(69181),h=n(98914),p=n(98422),f=n(71068),g=n(19081),b=n(58175),y=n(75822),w=n(92039),Z=n(18618),k=n(74571),C=n(6511),S=n(63651),x=n(47929);let _={backDrop:"backDrop-FxvQIL",liveStreamTitle:"liveStreamTitle-xahUfX",liveStreamContainer:"liveStreamContainer-NKIioJ",viewerCountContainer:"viewerCountContainer-uxBWdH",endedMessage:"endedMessage-Z3p5RL",endedMessageContent:"endedMessageContent-d_enFy",liveStreamExplicitLabel:"liveStreamExplicitLabel-roJA52",liveStreamThumbnail:"liveStreamThumbnail-uER3zj",explicit:"explicit-tw5du6",liveStreamVideoPlayer:"liveStreamVideoPlayer-tm5aYT"},B=e=>{var t,n;let{activeLiveStream:o,fromPub:B=!1,listenForViewerCount:I=!0,isFeedItem:P=!1,videoPlayerProps:N,startMuted:E=!1}=e,L=(0,r.useRef)(null),T=(0,r.useRef)(null),[z,X]=(0,r.useState)(!P);(0,y.KS)({videoPlayerRef:L,showPaywall:!1,disable:z}),(0,r.useEffect)(()=>{if(z){let e=()=>{X(!1)};return window.addEventListener("scroll",e),()=>{window.removeEventListener("scroll",e)}}},[z]),(0,r.useEffect)(()=>{var e;let t=null===(e=L.current)||void 0===e?void 0:e.player,n=()=>{t&&t.duration&&t.duration>1&&!isNaN(t.duration)&&(t.currentTime=t.duration-1),t&&(t.playbackRate=1)};return t&&t.addEventListener("play",n),()=>{null==t||t.removeEventListener("play",n)}},[L.current]);let M=(0,k.Ml)(T),[R,O]=(0,r.useState)(o.liveStreamInformation.currentViewerCount),[U,V]=(0,r.useState)(!1),{isMobile:F}=(0,p.v9)(),W=(0,m.Fl)().autoPlayVideo,[Y,j]=(0,r.useState)(!1);(0,r.useEffect)(()=>{let e;return Y&&(e=setTimeout(()=>{j(!1)},4e3)),()=>{clearTimeout(e)}},[Y]);let J=(0,w.rG)();(0,r.useEffect)(()=>{if(I)return null==J?void 0:J.listen({["live-stream:".concat(o.liveStream.id)]:e=>{var t,n;let{data:i}=e;(null==i?void 0:null===(t=i.message)||void 0===t?void 0:t.type)==="live-stream:viewer-count-updated"&&O(i.message.current_viewer_count),(null==i?void 0:null===(n=i.message)||void 0===n?void 0:n.type)==="live-stream:ended"&&V(!0)}})},[J,I]);let A=o.liveStreamInformation.isExplicit||"active"!==o.liveStream.status;return U?null:(0,l.BX)(g.hs,{position:"relative",overflow:"hidden",radius:"sm",ref:T,className:_.liveStreamContainer,onClick:e=>{if(e.stopPropagation(),"active"===o.liveStream.status){let e=(0,h.K1)()?(0,S.bHR)({liveStreamId:o.liveStream.id,utm_campaign:x.VX.substackProfile,params:(0,i._)({utm_medium:x.lP.web},B&&{fromPub:B})}):(0,S.UDR)({noBase:!0,liveStreamId:o.liveStream.id,params:(0,i._)({utm_campaign:x.VX.substackProfile,utm_medium:x.lP.web},B&&{fromPub:B})});(0,h.K1)()?document.location.href=e:(0,h.uX)(e)}else j(!0)},cursor:"pointer",children:[A?(0,l.BX)(l.HY,{children:[o.liveStreamInformation.isExplicit&&(0,l.tZ)(f.xu,{position:"absolute",inset:0,zIndex:1,children:(0,l.BX)(g.tu,{className:_.liveStreamExplicitLabel,alignItems:"center",justifyContent:"center",gap:4,children:[(0,l.tZ)(c.Z,{color:"white",size:24}),(0,l.tZ)(b.xv.B5,{color:"white",textAlign:"center",translated:!0,children:"May contain sensitive content"})]})}),(0,l.tZ)("img",{className:a()(_.liveStreamThumbnail,o.liveStreamInformation.isExplicit&&_.explicit),src:o.liveStreamInformation.desktopThumbnailGifUrl,alt:"Live stream thumbnail"})]}):(0,l.tZ)(s.j,(0,i._)({className:_.liveStreamVideoPlayer,ref:L,liveStreamId:o.liveStream.id,noKeyboardShortcuts:!0,noControls:!0,autoPlay:W,pub:o.pub||null,mediaUpload:{id:"ls-".concat(o.liveStream.id),width:1920,height:1080},noJoin:!0,thumbnailUrl:o.liveStreamInformation.desktopThumbnailPhotoUrl,isLive:!0,renderPlayButton:P?()=>(0,l.tZ)(Z.fI,{isPlaying:!1,size:F?40:56}):void 0,startMuted:E},N),!0),"active"===o.liveStream.status?(0,l.BX)(g.gq,{gap:8,className:_.viewerCountContainer,children:[(0,l.tZ)(v.Qn,{}),(0,l.tZ)(v.C,{viewerCount:R})]}):(0,l.tZ)(g.gq,{className:_.viewerCountContainer,children:(0,l.tZ)(v.j0,{})}),Y&&(0,l.tZ)(g.gq,{className:_.endedMessage,children:(0,l.BX)(g.tu,{className:_.endedMessageContent,padding:12,radius:"md",alignItems:"center",justifyContent:"center",gap:4,children:[(0,l.tZ)(d.Z,{size:24,stroke:"white"}),(0,l.tZ)(b.xv.B3,{color:"white",children:"Live video has ended"})]})}),(0,l.tZ)("div",{className:_.backDrop}),(0,l.BX)(g.gq,{position:"absolute",style:{left:0,right:0,bottom:0,width:"100%",pointerEvents:"none"},direction:"row-reverse",alignItems:"end",children:[!A&&(0,l.tZ)(f.xu,{padding:12,onClick:e=>{e.stopPropagation()},style:{pointerEvents:"auto"},children:(0,l.tZ)(C.Z,{hideVolumeBar:!0,disableShortcuts:!1,disableTooltips:!1,isFocused:M,mediaRef:L})}),(0,l.tZ)(u.C,{children:(0,l.tZ)(g.tu,{className:_.liveStreamTitle,gap:4*!P,padding:P?12:16,style:{pointerEvents:"none"},children:P?(0,l.BX)(l.HY,{children:[(0,l.tZ)(b.xv.B3,{weight:"semibold",color:"vibrance-primary",children:o.liveStream.title}),(0,l.tZ)(b.xv.B4,{color:"vibrance-secondary",children:null===(t=o.pub)||void 0===t?void 0:t.name})]}):(0,l.BX)(l.HY,{children:[(0,l.tZ)(b.xv.H4,{color:"vibrance-primary",children:o.liveStream.title}),(0,l.tZ)(b.xv.B3,{color:"vibrance-secondary",children:null===(n=o.pub)||void 0===n?void 0:n.name})]})})})]})]})}},27966:function(e,t,n){n.d(t,{g:()=>c,j:()=>s});var i=n(16584),l=n(95441),r=n(71068),o=n(19081),a=n(5749);function c(e){let{country:t,type:n,id:r}=e,{iString:c}=(0,l.M1)(),u="https://embed.music.apple.com/".concat(t,"/").concat(n,"/").concat(r,"?theme=auto&app=music");return(0,i.tZ)(o.hs,{radius:"md",outline:"detail",overflow:"hidden",className:a.Z.appleMusic,children:(0,i.tZ)(d,{src:u,height:"song"===n?"175":"450",frameBorder:0,allow:"encrypted-media *",title:c("Apple Music player"),sandbox:"allow-forms allow-popups allow-same-origin allow-scripts allow-storage-access-by-user-activation allow-top-navigation-by-user-activation"})})}let d=(0,r.zo)({border:"unset",bg:"black",flex:"grow",radius:"md"},"iframe"),u=["album","playlist","song","artist","station"];function s(e){if(!e)return null;try{let t=new URL(e);if(!["music.apple.com","www.music.apple.com"].includes(t.host))return null;let n=t.pathname.split("/").filter(Boolean);if(n.length<3)return null;let[i,l,...r]=n,o=r[r.length-1];if(!i||!l||!o)return null;if("album"===l&&t.searchParams.has("i")){let e=t.searchParams.get("i");if(e)return{country:i,type:"song",id:e}}if(!u.includes(l))return null;return{country:i,type:l,id:o}}catch(e){return null}}},72572:function(e,t,n){n.d(t,{N:()=>h});var i=n(16584),l=n(94184),r=n.n(l),o=n(99869),a=n(20160),c=n(20888),d=n(27625),u=n(19081),s=n(58175),m=n(91400),v=n(5749);function h(e){let{image:t,title:n,url:l,host:h,readOnly:p,isExplicit:f,onClick:g}=e,b=(0,m.XA)(),{isHidden:y,onShow:w}=(0,d.Sl)(!!f);return(0,i.tZ)(a.W,{children:(0,i.BX)(u.hs,{className:r()(v.Z.postAttachment,p&&v.Z.readOnly),position:"relative",bg:"primary",radius:"md",minWidth:0,padding:12,gap:12,onClick:g,as:p?"div":"a",href:p?void 0:l,rel:"nofollow noopener ugc",target:"_blank",draggable:!1,showFocus:!0,children:[(0,i.BX)(u.tu,{gap:2,flex:"grow",minWidth:0,children:[h&&(0,i.tZ)(s.xv.B4,{as:"p",color:"secondary",clamp:b?1:2,children:h}),(0,i.tZ)(s.xv.B3,{clamp:b?1:2,color:"primary",weight:"medium",children:n})]}),t?(0,i.tZ)(c.e,{className:r()(v.Z.linkImage),src:null!=t?t:"",useRetinaSizing:!0,imageIsFixedWidth:!0,maxWidth:64,imageProps:{smartCrop:!0,aspect:"1:1"}}):(0,i.tZ)(u.hs,{width:64,height:64,bg:"secondary",radius:"md",alignItems:"center",justifyContent:"center",children:(0,i.tZ)(o.Z,{stroke:"var(--color-fg-secondary)"})}),y&&(0,i.tZ)(d.HU,{onShow:w})]})})}},25827:function(e,t,n){n.d(t,{W:()=>v});var i=n(16584),l=n(30396),r=n(31122),o=n(98914),a=n(19081),c=n(76820),d=n(24054),u=n(63651),s=n(47929),m=n(5749);function v(e){let{activeLiveStream:t,onAttachmentClick:n,maxWidth:v,videoPlayerProps:h}=e,p=(0,o.K1)(),f=(0,l.sO)(null),g=(0,c.Qz)(f,v),b=d.Sb/d.rx,y={};if(p){let e=null!=g?g:c.YQ;y={width:"".concat(e,"px"),height:"".concat(e/b,"px")}}else{let e=null!=g?g:c.PJ;y={width:"".concat(e,"px"),height:"".concat(e/b,"px")}}return(0,i.tZ)(a.tu,{width:"100%",ref:f,onClick:()=>{null==n||n({attachmentType:"live_stream",attachmentId:t.liveStream.id.toString()});let e=p?(0,u.bHR)({liveStreamId:t.liveStream.id,utm_campaign:s.VX.substackProfile,params:{utm_medium:s.lP.web,appStoreRedirect:!!p}}):(0,u.UDR)({noBase:!0,liveStreamId:t.liveStream.id,params:{utm_campaign:s.VX.substackProfile,utm_medium:s.lP.web}});p?document.location.href=e:(0,o.uX)(e)},children:(0,i.tZ)(a.tu,{style:y,radius:"md",overflow:"hidden",position:"relative",className:m.Z.videoPlayerContainer,children:(0,i.tZ)(r.Y,{activeLiveStream:t,listenForViewerCount:!1,isFeedItem:!0,videoPlayerProps:h,startMuted:!0})})})}},58998:function(e,t,n){n.d(t,{h:()=>v});var i=n(16584),l=n(30396),r=n(20160),o=n(95441),a=n(92291),c=n(15771),d=n(19081),u=n(58175),s=n(15503),m=n(23854);function v(e){let{attachment:t,readOnly:n,isRestack:v,onAttachmentClick:h,utm_content:p}=e,f=[m.sC.YouBlocked,m.sC.YouMuted].includes(t.reason)&&!!t.hidden_attachment,[g,b]=(0,l.eJ)(!1),{iString:y}=(0,o.M1)();return g&&t.hidden_attachment?(0,i.tZ)(a.Mk,{attachment:t.hidden_attachment,readOnly:n,isRestack:v,onAttachmentClick:h,utm_content:p}):(0,i.tZ)(r.W,{children:(0,i.BX)(d.hs,{bg:"primary",border:"detail",justifyContent:f?"space-between":"center",alignItems:"center",radius:"md",padding:16,children:[(0,i.tZ)(u.xv.B4,{color:"secondary",align:"center",children:t.reason===m.sC.YouBlocked?"This note is from someone you blocked.":t.reason===m.sC.YouMuted?"This note is from someone you muted.":"This attachment is not available."}),f&&(0,i.tZ)(c.kG,{resetCss:!0,onClick:()=>{var e;(0,s.Kr)(t.id,t.reason,{noteId:null===(e=t.hidden_attachment)||void 0===e?void 0:e.id}),b(!0)},children:(0,i.tZ)(u.xv,{weight:"bold",size:14,color:"secondary",children:y("Show")})})]})})}},60225:function(e,t,n){n.d(t,{U:()=>B});var i=n(7409),l=n(99282),r=n(16584),o=n(94184),a=n.n(o),c=n(29032),d=n(20888),u=n(95441),s=n(60807),m=n(98170),v=n(3411),h=n(71068),p=n(15771),f=n(19081),g=n(38841),b=n(58175),y=n(65575),w=n(32189),Z=n(91400),k=n(64172),C=n(60308),S=n(84864),x=n(47929);let _={attachment:"attachment-E9mJrI",logoContainer:"logoContainer-vqxwR7",bgImage:"bgImage-OTU5LC",header:"header-d8U2_d",gradientBG:"gradientBG-jbdaN9",gradientBg:"gradientBG-jbdaN9",button:"button-uDQ6x4"};function B(e){var t;let{publication:n,readOnly:i,onClick:l}=e,o=null!==(t=n.logoPalette)&&void 0!==t?t:null;return(0,r.tZ)(I,{readOnly:i,onClick:l,publication:n,palette:o,children:(0,r.BX)(f.sg,{children:[(0,r.tZ)(P,{pub:n,palette:o}),(0,r.tZ)(E,{pub:n,readOnly:i,palette:o})]})})}let I=e=>{let{readOnly:t,onClick:n,publication:i,palette:l,children:o}=e,c=(0,m.UO)(l);return(0,r.tZ)(f.sg,{as:t?"div":"a",className:a()(_.attachment,t&&_.readOnly),position:"relative",bg:"secondary",radius:"md",target:"_blank",rel:"noopener noreferrer",minWidth:0,onClick:n,href:t?void 0:(0,C.TJI)(i),draggable:!1,showFocus:!0,animate:!0,style:c,children:o})};function P(e){var t;let{pub:n,palette:o}=e,a=o?(0,i._)({},(0,v.LE)({palette:o,defaultColor:"var(--color-dark-bg-primary)"})):void 0;return(0,r.BX)(f.M5,{gap:12,padding:12,alignItems:"center",className:_.header,sizing:"border-box",position:"relative",style:(0,l._)((0,i._)({},a),{"--glow-color":(0,v.zn)(null==o?void 0:null===(t=o.Vibrant)||void 0===t?void 0:t.rgb,.5)}),overflow:"hidden",children:[(0,r.tZ)(h.xu,{className:_.logoContainer,radius:"sm",children:(0,r.tZ)(g.wk,{pub:n,size:144,outline:"detail",shadow:"lg"})}),(0,r.tZ)(N,{pub:n})]})}function N(e){var t;let{pub:n}=e;return(0,r.tZ)(d.e,{imageProps:{aspect:"1.91:1",crop:"fill"},src:null!==(t=n.logo_url)&&void 0!==t?t:"",maxWidth:568,useRetinaSizing:!0,imageIsFixedWidth:!0,draggable:!1,className:_.bgImage})}function E(e){let{pub:t,readOnly:n,palette:i}=e;return(0,r.BX)(f.hs,{gap:12,padding:12,alignItems:"center",borderTop:"detail",children:[(0,r.tZ)(L,{pub:t,readOnly:n,palette:i}),!n&&(0,r.tZ)(z,{pub:t})]})}function L(e){let{pub:t,readOnly:n,palette:i}=e;return(0,r.BX)(f.sg,{gap:2,minWidth:0,flex:"grow",children:[(0,r.tZ)(b.xv.B4,{color:i?"vibrance-secondary":"secondary",ellipsis:!0,nowrap:!0,children:(0,r.tZ)(T,{pub:t,readOnly:n})}),(0,r.tZ)(b.xv.B3,{clamp:2,color:i?"vibrance-primary":"primary",weight:"medium",children:t.name})]})}function T(e){let{pub:t,readOnly:n}=e;return n?(0,r.tZ)(r.HY,{children:t.subdomain}):(0,r.tZ)(y.zr,{href:(0,C.TJI)(t),draggable:!1,children:t.subdomain})}function z(e){let{pub:t}=e,{iString:n}=(0,u.M1)(),i=(0,Z.XA)(),l=(0,s.aF)(),o=(null==t?void 0:t.payments_state)==="enabled",{isFreeSubscribed:a,isPaid:d,isAuthor:m,isPledged:v,isFounding:h}=(0,k.Y0)(t.id),f=(0,w.x)({surface:"pub-attachment"}),g=(0,k.Th)(),b=!(o?d:d||a);return t?m?(0,r.tZ)(c.C,{children:(0,r.tZ)(p.zx,{size:"sm",priority:"secondary-outline",newTab:!0,href:(0,C.TJI)(t),className:_.button,children:n("View now")})}):(0,r.tZ)(c.C,{children:(0,r.tZ)(p.zx,{size:"sm",priority:b?"primary":"secondary-outline",newTab:!0,className:_.button,href:(0,C.W1P)(t,{user:l,addBase:!0,params:{utm_source:x.b3.substack,utm_medium:x.lP.web,utm_campaign:x.VX.notesPubAttachment}}),onClick:e=>{if(!l&&t){f(t)(e);return}setTimeout(()=>{g.refetchPublication(t.id)},5e3)},children:b?(0,S.getSubscribeText)(t,{isFreeSubscribed:a,isPledged:v,isFoundingSubscribed:h,isMobile:i}):n("Subscribed")})}):null}},71576:function(e,t,n){n.d(t,{w:()=>p});var i=n(7409),l=n(99282),r=n(16584),o=n(20160),a=n(98170),c=n(26049),d=n(80878),u=n(80026),s=n(19081),m=n(2009),v=n(63651),h=n(47929);let p=e=>{let{readOnly:t,attachment:n,onClick:i,utm_content:l,onSavePostClick:c}=e,{post:d,publication:u,postImageSelection:s}=n,m=function(e){var t,n,i,l,r;let o=(null!==(t=e.width)&&void 0!==t?t:520)/(null!==(n=e.height)&&void 0!==n?n:450);if(o>1){let t=!e.img_width||(null==e?void 0:e.img_width)>520?520:null!==(i=e.width)&&void 0!==i?i:520;return{height:t/o,width:t}}let a=(null!==(l=e.height)&&void 0!==l?l:0)>450?450:null!==(r=e.height)&&void 0!==r?r:450;return{height:a,width:a*o}}(s);return(0,r.tZ)(o.W,{children:(0,r.BX)(f,{readOnly:t,onClick:i,publication:u,post:d,postImageSelection:s,size:m,utm_content:l,children:[(0,r.tZ)(g,{postImageSelection:s,size:m}),(0,r.tZ)(a.Q9,{post:d,publication:u,onSavePostClick:c,compact:!1,readOnly:t,palette:s.imagePalette})]})})},f=e=>{let{readOnly:t,children:n,publication:l,postImageSelection:o,post:c,onClick:u,size:p,utm_content:f}=e,g=(0,a.UO)(o.imagePalette),b=t?void 0:(0,v.uRy)(l,c,{feedViewer:!1,urlParams:{imgSelection:null==o?void 0:o.id,utm_content:h.fZ.substackFeedItem,utm_source:null!=f?f:void 0}});return(0,r.tZ)(s.tu,{className:"container-ruacmA",as:t?"div":"a",position:"relative",onClick:e=>{u&&u(),m.L&&!t&&(0,d.Q)(e,(0,v.uRy)(l,c,{noBase:!0,feedViewer:!0,urlParams:{imgSelection:null==o?void 0:o.id,utm_content:h.fZ.substackFeedItem,utm_source:null!=f?f:void 0}}))},href:b,draggable:!1,showFocus:!0,animate:!0,bg:"primary",radius:"md",overflow:"hidden",style:(0,i._)({width:o?p.width:void 0},g),children:n})};function g(e){var t,n;let{postImageSelection:o,size:a}=e,d=(t=o.img_src,n=a,{backgroundImage:(0,c._)(t,n),backgroundSize:"cover",backgroundPosition:"center"});return(0,r.tZ)(u.xu,{style:(0,l._)((0,i._)({},d),{width:a.width,height:a.height})})}},86301:function(e,t,n){n.d(t,{J:()=>c,N:()=>u});var i=n(16584),l=n(95441),r=n(71068),o=n(19081),a=n(5749);function c(e){let{url:t,type:n}=e,{iString:r}=(0,l.M1)(),c=encodeURIComponent(t);return(0,i.tZ)(o.hs,{radius:"md",outline:"detail",overflow:"hidden",className:a.Z.soundcloud,children:(0,i.tZ)(d,{src:"https://w.soundcloud.com/player/?url=".concat(c,"&color=%23ff6719&auto_play=false&hide_related=true&show_comments=false&show_user=true&show_reposts=false&show_teaser=false&visual=true"),height:"track"===n?"166":"300",frameBorder:0,scrolling:"no",title:r("Soundcloud player"),allow:"clipboard-write; encrypted-media; fullscreen; picture-in-picture",sandbox:"allow-scripts allow-same-origin"})})}let d=(0,r.zo)({border:"unset",bg:"black",flex:"grow",radius:"md"},"iframe");function u(e){if(!e)return null;try{let t=new URL(e);if(!["soundcloud.com","www.soundcloud.com","m.soundcloud.com"].includes(t.host))return null;let n=t.pathname.split("/").filter(Boolean);if(n.length<2)return null;let i="track";return n.includes("sets")?i="set":n.length>=2&&(i="track"),{url:e,type:i}}catch(e){return null}}},73544:function(e,t,n){n.d(t,{R:()=>s,n:()=>c});var i=n(16584),l=n(95441),r=n(71068),o=n(19081),a=n(5749);function c(e){let{embedType:t,resourceId:n}=e,{iString:r}=(0,l.M1)();if(!n)return null;let c="https://open.spotify.com/embed/".concat(t,"/").concat(n);return(0,i.tZ)(o.hs,{radius:"md",outline:"detail",overflow:"hidden",className:a.Z.spotify,children:(0,i.tZ)(d,{src:c,height:"playlist"===t||"album"===t?"352":"152",frameBorder:0,allow:"clipboard-write; encrypted-media; fullscreen; picture-in-picture",title:r("Spotify player"),sandbox:"allow-scripts allow-same-origin"})})}let d=(0,r.zo)({border:"unset",bg:"black",flex:"grow",radius:"md"},"iframe"),u=["track","playlist","show","episode","artist","album"];function s(e){if(!e)return null;try{let t=new URL(e);if(!["spotify.com","www.spotify.com","open.spotify.com","play.spotify.com","embed.spotify.com"].includes(t.host))return null;let n=t.pathname.split("/").filter(Boolean);if(n.length<2)return null;let[i,l]=n;if(!u.includes(i))return null;return{embedType:i,resourceId:l}}catch(e){return null}}},79251:function(e,t,n){n.d(t,{Mi:()=>s});var i=n(16584),l=n(98170),r=n(53678),o=n(58175),a=n(2009),c=n(23398),d=n(23854),u=n(63651);function s(e){let{attachments:t,readOnly:n,onAttachmentClick:l,utm_content:r}=e;if(0===t.length)return null;let o=t.filter(e=>"image"!==e.type&&"video"!==e.type&&!("post"===e.type&&e.postSelection));return(0,i.tZ)(i.HY,{children:o.map(e=>(0,i.tZ)(m,{attachment:e,readOnly:n,onAttachmentClick:l,utm_content:r},e.id))})}function m(e){let{attachment:t,readOnly:n,onAttachmentClick:l,utm_content:r}=e,a=null;return(0,d.bP)(t)?null:("textlink"===t.type&&(a=(0,i.tZ)(v,{url:t.url,readOnly:n,onClick:()=>{null==l||l()}})),"link"===t.type&&(a=(0,i.tZ)(h,{readOnly:n,onClick:l,url:t.linkMetadata.url},t.id)),"post"===t.type&&(a=(0,i.tZ)(p,{readOnly:n,post:t.post,publication:t.publication,onClick:l},t.id)),"comment"===t.type&&(a=(0,i.tZ)(g,{comment:t.comment,readOnly:n,onAttachmentClick:l,utm_content:r},t.id)),"publication"===t.type&&(a=(0,i.tZ)(f,{readOnly:n,publication:t.publication,onClick:l},t.id)),a?(0,i.tZ)(o.xv.B4,{color:"highlight",children:a}):null)}function v(e){let{url:t,readOnly:n,onClick:l}=e;return(0,i.tZ)(r.hh,{onClick:l,href:n?void 0:t,rel:"nofollow noopener ugc",target:"_blank",className:"note-link",color:"highlight",fontSize:14,children:(0,c.u)(t,48)})}function h(e){let{url:t,readOnly:n,onClick:l}=e;return(0,i.tZ)(v,{url:t,readOnly:n,onClick:l})}function p(e){let{post:t,publication:n,readOnly:r,onClick:o}=e,a=(0,u.uRy)(n,t,{feedViewer:!1}),c=(0,l.vE)({post:t,publication:n,readOnly:r,onClick:o});return(0,i.tZ)(v,{url:a,readOnly:r,onClick:()=>{c(new MouseEvent("click"))}})}function f(e){let{publication:t,readOnly:n,onClick:l}=e;return(0,i.tZ)(v,{url:t.base_url,readOnly:n,onClick:l})}function g(e){let{comment:t,readOnly:n,onAttachmentClick:l,utm_content:r}=e,o=(0,u.Sgq)(t,{noBase:a.L,urlParams:{utm_content:null!=r?r:void 0}});return(0,i.tZ)(v,{url:o,readOnly:n,onClick:()=>null==l?void 0:l({commentId:String(t.id)})})}},68710:function(e,t,n){n.d(t,{D:()=>a});var i=n(16584),l=n(71068),r=n(19081),o=n(5749);function a(e){let{videoId:t}=e;return(0,i.tZ)(r.hs,{radius:"md",outline:"detail",overflow:"hidden",className:o.Z.tiktok,children:(0,i.tZ)(c,{src:"https://www.tiktok.com/player/v1/".concat(t,"?").concat("volume_control=0&loop=1&timestamp=0&closed_caption=0&play_button=1&fullscreen_button=0"),frameBorder:0})})}let c=(0,l.zo)({className:o.Z.tiktokIframe,border:"unset",bg:"black",flex:"grow",radius:"md"},"iframe")},60735:function(e,t,n){n.d(t,{n:()=>a});var i=n(16584),l=n(71068),r=n(19081),o=n(5749);function a(e){let{videoId:t}=e;return(0,i.tZ)(r.hs,{radius:"md",outline:"detail",overflow:"hidden",className:o.Z.youtube,children:(0,i.tZ)(c,{src:"https://www.youtube.com/embed/".concat(t),frameBorder:0})})}let c=(0,l.zo)({className:o.Z.youtubeIframe,border:"unset",bg:"black",flex:"grow"},"iframe")},6511:function(e,t,n){n.d(t,{Z:()=>b});var i=n(16584),l=n(30396),r=n(74691),o=n.n(r),a=n(10844),c=n(89919),d=n(53239),u=n(21676),s=n(98422),m=n(19081),v=n(84370),h=n(87077),p=n(74571),f=n(63722),g=n(20080);let b=e=>{let{mediaRef:t,isFocused:n,disableShortcuts:r,disableTooltips:b=!1,hideVolumeBar:y=!1}=e,{isMobile:w}=(0,s.v9)(),[Z,k]=(0,l.eJ)(0),[C,S]=(0,l.eJ)(!1),[x,_]=(0,l.eJ)(!1),B=(0,l.sO)(null),I=e=>{let n=0;if(B.current){var i;let l=B.current.getBoundingClientRect(),r=(e.clientX-l.left)/l.width;k(n=o()(r,0,1)),localStorage.setItem("video_player:volume",n.toString()),(null===(i=t.current)||void 0===i?void 0:i.player)&&(t.current.player.volume=n)}C&&n>0&&L()},P=e=>{_(!0),I(e)},N=()=>{_(!1),document.removeEventListener("mousemove",P),document.removeEventListener("mouseup",N),document.removeEventListener("selectstart",E)},E=e=>{x&&e.preventDefault()};(0,l.d4)(()=>{var e,n,i,l,r,a;let c=parseFloat(null!==(l=localStorage.getItem("video_player:volume"))&&void 0!==l?l:"");if(S(null!==(r=null===(n=t.current)||void 0===n?void 0:null===(e=n.player)||void 0===e?void 0:e.muted)&&void 0!==r&&r),isNaN(c))(null===(i=t.current)||void 0===i?void 0:i.player)&&k(t.current.player.volume);else{let e=o()(c,0,1);k(e),(null===(a=t.current)||void 0===a?void 0:a.player)&&(t.current.player.volume=e)}return()=>{document.removeEventListener("mousemove",P),document.removeEventListener("mouseup",N),document.removeEventListener("selectstart",E)}},[]);let L=()=>{var e;(null===(e=t.current)||void 0===e?void 0:e.player)&&(t.current.player.muted=!C)},T=()=>{var e;(null===(e=t.current)||void 0===e?void 0:e.player)&&S(t.current.player.muted)};return(0,l.d4)(()=>{var e;return(null===(e=t.current)||void 0===e?void 0:e.player)&&t.current.player.addEventListener("volumechange",T),()=>{var e;(null===(e=t.current)||void 0===e?void 0:e.player)&&t.current.player.removeEventListener("volumechange",T)}},[]),(0,p.Kr)("m",L,n&&!r),(0,i.BX)(m.gq,{className:g.Z.mainContainer,justifyContent:"center",alignItems:"center",position:"relative",children:[(0,i.tZ)(h.u,{disabled:b,text:C?"Unmute":"Mute",trailing:r?void 0:(0,i.tZ)(v.T,{children:"M"}),children:(0,i.tZ)(f.Z,{onClick:L,children:C?(0,i.tZ)(a.Z,{size:18}):Z>.6||w?(0,i.tZ)(c.Z,{size:18}):Z>.3?(0,i.tZ)(d.Z,{size:18}):(0,i.tZ)(u.Z,{size:18})})}),!w&&!y&&(0,i.tZ)(m.gq,{className:g.Z.volumeBarContainer,justifyContent:"center",alignItems:"center",onMouseDown:e=>{e.preventDefault(),_(!0),I(e),document.addEventListener("mousemove",P),document.addEventListener("mouseup",N),document.addEventListener("selectstart",E)},children:(0,i.tZ)("div",{className:g.Z.volumeBar,ref:B,children:(0,i.tZ)("div",{className:g.Z.volumeLevel,style:{width:"".concat(100*Z,"%")}})})})]})}},21666:function(e,t,n){n.d(t,{e:()=>r,k:()=>function e(t){let n=0;if(t){if(t.content&&t.content.length>0)for(let i of t.content)n+=e(i);else{var i,l;n+=null!==(l=null===(i=t.text)||void 0===i?void 0:i.length)&&void 0!==l?l:0}}return n}});var i=n(38927),l=n(22498);function r(e){let t=0;return(0,l.cb)(e,e=>{e.type&&i.t.includes(e.type)&&("codeBlock"===e.type&&e.content?e.content.forEach(e=>{if("text"===e.type){var n,i;t+=(null!==(i=(null!==(n=e.text)&&void 0!==n?n:"").match(/\n/g))&&void 0!==i?i:[]).length+1}}):t++)}),t}},76324:function(e,t,n){n.d(t,{$:()=>function e(t){let{limit:n=420}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=null,a=0,c=!1;if(t){var d,u,s,m;if(n<=0)c=!0;else if(t.content&&t.content.length>0)for(let o of(r=(0,l._)((0,i._)({},t),{content:[]}),t.content)){let t=e(o,{limit:n-a});if(t.doc){if(null===(d=r.content)||void 0===d||d.push(t.doc),a+=t.length,t.isTruncated){c=!0;break}}else{c=!0;break}}else a+=null!==(m=null===(u=(r=(0,l._)((0,i._)({},t),{text:null!==(s=(0,o.truncateText)(t.text,n))&&void 0!==s?s:void 0})).text)||void 0===u?void 0:u.length)&&void 0!==m?m:0,t.text!==r.text&&(c=!0)}return{doc:r,length:a,isTruncated:c}},p:()=>function e(t,n){var o;let a=[],c=!1,d=0;for(let i of null!==(o=t.content)&&void 0!==o?o:[]){if(i.type&&r.t.includes(i.type)){if(++d===n){c=!0,a.push(i);break}}else if(i.content){let t=e(i,n-d);if(d+=t.blockCount,t.isTruncated){a.push(t.doc),c=!0;break}}a.push(i)}let u=(0,l._)((0,i._)({},t),{content:a});return t.text&&(u.text=t.text.split(/\n/g).slice(0,n).join("\n")),{doc:u,blockCount:d,isTruncated:c}}});var i=n(7409),l=n(99282),r=n(38927),o=n(84864)}}]);