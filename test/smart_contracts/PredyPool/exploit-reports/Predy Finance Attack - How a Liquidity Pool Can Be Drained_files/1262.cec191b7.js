"use strict";(self.webpackChunksubstack=self.webpackChunksubstack||[]).push([["1262"],{85685:function(e,r,t){t.r(r),t.d(r,{ProfileCard:()=>er,ProfileCardHeader:()=>Q,ProfileHoverCard:()=>D,isUserProfileish:()=>M,useProfileHoverCard:()=>E});var i=t(7409),n=t(99282),l=t(98848),o=t(16584),a=t(98661),c=t(20160),u=t(1548),s=t(50012),d=t(35543),h=t(95441),p=t(85095),f=t(60807),m=t(80143),g=t(58033),b=t(54371),Z=t(11358),v=t(68833),_=t(93252),C=t(94874),y=t(15771),x=t(61254),w=t(19081),B=t(32700),S=t(38841),N=t(58175),X=t(87989),I=t(65958),z=t(38202),P=t(32189),T=t(33017),k=t(20521),A=t(60308),F=t(63651),R=t(81821),U=t(84864),j=t(47929),L=t(90271);function M(e){return!!(e.id&&e.name)}function D(e){var r,{dontStopPropagation:t,inline:a,children:c}=e,u=(0,l._)(e,["dontStopPropagation","inline","children"]);let d=E(u);return(0,R.tq)()||(0,_.P)()?(0,o.tZ)(o.HY,{children:c}):(0,o.BX)(s.l,(0,n._)((0,i._)({className:u.className,inline:a,forwardRef:null===(r=d.triggerProps)||void 0===r?void 0:r.ref},d.hoverProps),{onClick:e=>{t||e.stopPropagation()},children:[c,d.layer]}))}function E(e){var{subject:r,utmSource:t,placement:n}=e,c=(0,l._)(e,["subject","utmSource","placement"]);let{loading:u,refetch:s,viewerProfile:d,subjectProfile:h}=(0,p.Un)({subjectId:(null==r?void 0:r.author_id)||(null==r?void 0:r.user_id)||(null==r?void 0:r.id),subjectName:(null==r?void 0:r.name)||"Substack user",delayLoading:!0}),f=r&&d&&(null==r?void 0:r.id)===d.id,m=null==r?void 0:r.id,g=(0,a.useCallback)(()=>{var e;m&&!h&&s(m);let r=((null==h?void 0:null===(e=h.publicationUsers)||void 0===e?void 0:e.length)||0)>0;h&&(0,v.j)(v.FP.ACCOUNT_CARD_SHOWN,{profile_user_id:h.id,is_self:!!f,has_publication:!!r})},[s,m,h,f]),b=(0,B.o)((0,i._)({className:L.Z.profileHoverCard,onOpen:g,loading:u&&!h,hideOnScroll:!0,layerOptions:{placement:null!=n?n:"right-center"},content:h&&r&&m?(0,o.tZ)(er,{profile:h,subject:r,utmSource:t,forceRefresh:()=>s(m)}):null},c));return(0,R.tq)()?{layer:null,hoverProps:null,triggerProps:null}:b}let O=j.b3.accountCard;function K(e){let{pub:r,isWrites:t,isFounding:i,isPaid:n,utmSource:l}=e,a=!!(0,f.aF)();if(!r)return null;let c=(0,A.TJI)(r,{params:{utm_source:l||O,utm_content:t?j.fZ.writes:j.fZ.reads},signedIn:a});return(0,o.BX)("a",{href:c,target:"_blank",onClick:()=>{(0,v.j)(t?v.FP.ACCOUNT_CARD_WRITES_LINK_CLICKED:v.FP.ACCOUNT_CARD_READS_LINK_CLICKED),(0,v.x6)(r,"hover_profile")},className:L.Z.hoverCardAvatar,rel:"noopener",children:[(0,o.tZ)(S.wk,{pub:r,size:32,badgeType:i?"founder":n?"subscribed":null}),(0,o.tZ)(N.xv.B4,{weight:"medium",title:r.name,children:r.name})]})}function H(e){let{pub:r,utmSource:t}=e,i=(0,A.TJI)(r,{params:{utm_source:t||O,utm_content:j.fZ.writes},signedIn:!!(0,f.aF)()}),n=(0,U.getByLine)(r);return(0,o.BX)(w.sg,{as:"a",href:i,target:"_blank",onClick:()=>{(0,v.j)(v.FP.ACCOUNT_CARD_WRITES_LINK_CLICKED),(0,v.x6)(r,"hover_profile")},rel:"noopener",padding:12,gap:12,className:L.Z.writesCard,radius:"md",children:[(0,o.BX)(w.X2,{gap:12,children:[(0,o.tZ)(S.wk,{pub:r,size:40}),(0,o.BX)(w.sg,{flex:"grow",minWidth:0,justifyContent:"center",children:[(0,o.tZ)(N.xv.B4,{weight:"semibold",children:r.name}),n&&(0,o.BX)(N.xv.B4,{translated:!0,color:"secondary",children:["By ",I18N.p(n)]})]})]}),r.hero_text&&(0,o.tZ)(N.xv.B4,{color:"secondary",clamp:3,children:r.hero_text})]})}function W(e){let{subject:r,subscriptions:t,moreSubsLabel:i,utmSource:n}=e,{iString:l}=(0,h.M1)();return(0,o.BX)(w.sg,{children:[(0,o.tZ)(T.GF,{sectionTitle:l("Reads"),seeAllLabel:i,link:et(r,{utmSource:n})}),(0,o.tZ)(w.sg,{children:t.map(e=>(0,o.tZ)(K,{pub:e.publication,isPaid:"subscribed"===e.membership_state,isFounding:e.is_founding,utmSource:n}))})]})}function q(e){let{publication:r,utmSource:t}=e;return r?(0,o.tZ)(H,{pub:r,utmSource:t}):null}function Y(e){let{pub:r,profile:t,isSubscribed:i,user:n,utmSource:l,forceRefreshCard:a}=e,{iString:c}=(0,h.M1)(),u=(0,P.x)({surface:"hover_profile",zIndex:1001})(r,t),{isLoading:s,subscribe:d}=(0,Z.G)({publication:r,profileId:t.id,source:null!=l?l:"profile-card",onSuccess:()=>{a()}}),p=r?(0,F.W1P)(r,{user:n,addBase:!0,params:{utm_source:l||O,utm_content:j.fZ.subscribes,next:document.location.href}}):"";return r&&(i?(0,o.tZ)(y.zx,{priority:"secondary",href:p,onClick:()=>{(0,v.j)(v.FP.ACCOUNT_CARD_SUBSCRIBE_CLICKED),(0,v.x6)(r,"hover_profile")},title:r.name,children:c("Subscribed")}):"feed"===l&&n?(0,o.tZ)(y.zx,{onClick:e=>{e.preventDefault(),d()},title:r.name,disabled:s,children:c("Subscribe")}):(0,o.tZ)(y.zx,{href:p,localNavigation:!1,onClick:e=>{e.stopPropagation(),(0,v.j)(v.FP.ACCOUNT_CARD_SUBSCRIBE_CLICKED),u(e)},title:r.name,children:c("Subscribe")}))}function J(e){let{profile:r,entityKey:t}=e,{isFollowing:l,buttonProps:a}=(0,d.yr)(r,"hover-card",t),{iString:c}=(0,h.M1)();return(0,o.tZ)(y.zx,(0,n._)((0,i._)({priority:l?"secondary":"primary"},a),{children:c(l?"Following":"Follow")}))}function $(e){let{profile:r,entityKey:t}=e,{isFollowing:l,buttonProps:a}=(0,d.yr)(r,"hover-card",t);return(0,o.tZ)(y.hU,(0,n._)((0,i._)({priority:"tertiary"},a),{children:l?(0,o.tZ)(g.$,{}):(0,o.tZ)(b.w,{})}))}function G(e){let{profile:r}=e,{isLoading:t,handleStart:i}=(0,I.s)({source:"profile"}),{iString:n}=(0,h.M1)();return(0,o.tZ)(y.zx,{priority:"secondary",onClick:()=>i([r.id]),disabled:t,children:n("Message")})}function Q(e){var r,t,i;let{subject:n,profile:l,url:a}=e,c=n.name||"",u=null!==(r=l.handle)&&void 0!==r?r:null,s=null!==(t=l.bio)&&void 0!==t?t:"",d=n.id||0,h=null!==(i=l.bestseller_tier)&&void 0!==i?i:0;return(0,o.BX)(w.sg,{gap:8,children:[(0,o.BX)(w.X2,{gap:12,alignItems:"center",children:[(0,o.BX)(w.sg,{gap:2,flex:"grow",children:[(0,o.tZ)(N.hh,{href:a,children:(0,o.BX)(N.xv.H4,{children:[c,!!h&&!!d&&(0,o.BX)("span",{style:{whiteSpace:"nowrap",position:"relative",top:2,left:2},children:["\xa0",(0,o.tZ)(X.UserBadge,{inline:!0,tier:h,userId:d,tooltipOnHover:!0,size:"md"})]})]})}),u&&(0,o.tZ)(N.hh,{href:a,children:(0,o.tZ)(N.xv.Meta,{children:"@".concat(u)})})]}),(0,o.tZ)("a",{href:a,children:(0,o.tZ)(C.qE,{user:l,size:64})})]}),s&&(0,o.tZ)(N.xv.B3,{clamp:3,children:s})]})}function V(e){return(0,o.tZ)(w.sg,(0,i._)({flex:"grow"},e))}function ee(e){let{subject:r,profile:t,utmSource:i,pub:n,forceRefresh:l,entityKey:a}=e,c=(0,f.aF)(),{iString:u}=(0,h.M1)(),s=(null==r?void 0:r.id)===(null==c?void 0:c.id),d=s&&t&&!t.profile_set_up_at;return(0,o.tZ)(w.X2,{flex:"grow",gap:8,children:d?(0,o.tZ)(V,{children:(0,o.tZ)(y.zx,{href:(0,F.Nhr)({utmSource:i}),children:u("Set up profile")})}):s?null:(0,o.BX)(w.X2,{flex:"grow",gap:8,paddingTop:8,children:[n?(0,o.tZ)(V,{children:(0,o.tZ)(Y,{pub:n,isSubscribed:t.isSubscribed,user:c,profile:t,utmSource:i,forceRefreshCard:l})}):(0,o.tZ)(V,{children:(0,o.tZ)(J,{profile:t,entityKey:a})}),t.can_dm&&(0,o.tZ)(V,{children:(0,o.tZ)(G,{profile:t})}),n&&(0,o.tZ)($,{profile:t,entityKey:a})]})})}function er(e){var r;let t,i,n,l;let{profile:a,subject:u,className:s,utmSource:d,forceRefresh:h}=e,p=(0,m.Y)();if(!a)return null;let{subscriptions:f,moreSubsLabel:g}=(t=[],a&&a.subscriptions&&(t=(0,U.sortSubscriptions)(a.subscriptions.filter(e=>!!e))),i=null,t.length>3&&(i="See all (".concat((0,U.numberToString)(t.length),")")),{subscriptions:t=t.slice(0,3),moreSubsLabel:i}),{publications:b}=(n=[],a&&a.publicationUsers&&(n=(n=a.publicationUsers.filter(e=>!!e))&&(0,k.x)(n)),l=null,n.length>1&&(l="See all (".concat((0,U.numberToString)(n.length),")")),{publications:n=n.slice(0,1),morePubsLabel:l}),Z=et(u,{utmSource:d}),v=a.primaryPublication&&(null===(r=a.publicationUsers.find(e=>{var r;return e.publication_id===(null==a?void 0:null===(r=a.primaryPublication)||void 0===r?void 0:r.id)}))||void 0===r?void 0:r.publication),_=b.length>0,C=f.length>0&&!_;return(0,o.tZ)(c.W,{children:(0,o.tZ)("div",{className:s,children:(0,o.BX)(w.sg,{gap:8,padding:8,children:[(0,o.tZ)(Q,{profile:a,subject:u,url:Z}),(0,o.tZ)(ee,{profile:a,pub:v,subject:u,utmSource:d,forceRefresh:h,entityKey:p}),_&&(0,o.tZ)(q,{publication:v,utmSource:d}),C&&(0,o.BX)(o.HY,{children:[(0,o.tZ)(x.iz,{paddingY:8}),(0,o.tZ)(W,{subject:u,subscriptions:f,moreSubsLabel:g,utmSource:d})]}),a.mutualsContext&&(0,o.BX)(o.HY,{children:[(0,o.tZ)(x.iz,{paddingY:8}),(0,o.tZ)(ei,{mutualsContext:a.mutualsContext,utmSource:d})]})]})})})}function et(e){let{utmSource:r}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t="undefined"!=typeof window&&window.location.href.startsWith((0,F.ZJn)());return(0,A.NNq)(e,{noBase:t,utm_source:r||O})}function ei(e){let{mutualsContext:r,utmSource:t}=e,{iString:i,iPlural:n}=(0,h.M1)(),l=r.users.sort(e=>e.photo_url?1:-1);return 0===l.length?null:(0,o.BX)(w.X2,{alignItems:"center",gap:12,children:[(0,o.tZ)(w.X2,{style:{paddingLeft:6},children:l.slice(0,3).map(e=>(0,o.tZ)(w.X2,{as:"a",href:(0,A.NNq)(e,{utm_source:j.b3.profileCard}),children:(0,o.tZ)(z.t,{className:L.Z.facepileFace,src:e.photo_url||(0,A.I4e)(e.id),size:20})},e.id))}),(0,o.BX)(N.xv.B4,{color:"secondary",children:["followers"===r.type&&i("Followed by "),(0,o.tZ)(u.M,{array:l,limit:3,formatter:e=>(0,o.tZ)(N.hh,{href:et(e,{utmSource:t}),children:e.name})}),"subscribers"===r.type?n(" subscribes"," subscribe",l.length):"","."]})]})}},70379:function(e,r,t){t.d(r,{FN:()=>v,VW:()=>T,dd:()=>A,pm:()=>F});var i=t(7409),n=t(99282),l=t(16584);if(!/^(1588|1691|2536|4457)$/.test(t.j))var o=t(19425);var a=t(71375),c=t(98661),u=t(29032),s=t(20160),d=t(83786),h=t(71068),p=t(15771);if(!/^(1588|1691|2536|4457)$/.test(t.j))var f=t(58076);var m=t(19081),g=t(58175),b=t(91400),Z=t(62066);function v(e){let{text:r,description:t,cta:i,Icon:n,href:o,localNavigation:a,showClose:c=!0,onAccept:p,onClose:f}=e,m=t?X:I,g=t?S:B,b=(0,d.M)(),Z=(0,d.M)();return(0,l.tZ)(u.C,{children:(0,l.tZ)(s.W,{children:(0,l.tZ)(h.xu,{role:"alertdialog","aria-labelledby":b,"aria-describedby":t?Z:void 0,"aria-live":"assertive",children:(0,l.BX)(m,{role:"alert","aria-atomic":"true",children:[n&&(0,l.tZ)(C,{Icon:n}),(0,l.BX)(g,{children:[(0,l.BX)(z,{children:[(0,l.tZ)(y,{id:b,children:r}),t&&(0,l.tZ)(x,{id:Z,children:t})]}),i&&(0,l.tZ)(_,{href:o,onClose:f,onAccept:p,localNavigation:a,children:i})]}),c&&(0,l.tZ)(w,{onClose:f})]})})})})}let _=e=>{let{children:r,href:t,onClose:i,onAccept:n,localNavigation:o}=e;return(0,l.tZ)(p.zx,{priority:"primary-mono",size:"sm",onClick:e=>{null==i||i(),null==n||n(e)},href:t,localNavigation:o,children:r})},C=e=>{let{Icon:r}=e;return(0,l.tZ)(r,{size:20,color:"var(--color-utility-white)"})},y=e=>{let{children:r,id:t}=e;return(0,l.tZ)(g.xv.B3,{weight:"regular",color:"primary",id:t,children:r})},x=e=>{let{children:r,id:t}=e;return(0,l.tZ)(g.xv.B3,{color:"vibrance-secondary",id:t,children:r})},w=e=>{let{onClose:r}=e;return(0,l.tZ)(m.X2,{width:20,height:20,justifyContent:"center",alignItems:"center",children:(0,l.tZ)(p.hU,{priority:"quaternary",onClick:r,size:"xs","aria-hidden":"true",children:(0,l.tZ)(a.Z,{size:20})})})},B=(0,h.zo)({display:"flex",flex:"grow",direction:"row",alignItems:"center",gap:32}),S=(0,h.zo)({display:"flex",flex:"grow",direction:"column",alignItems:"start",gap:12}),N={display:"flex",direction:"row",radius:"sm",gap:12,paddingX:16,paddingY:12,border:"detail",shadow:"md",maxWidth:400,className:Z.Z.toast},X=(0,h.zo)((0,n._)((0,i._)({},N),{alignItems:"start"})),I=(0,h.zo)((0,n._)((0,i._)({},N),{alignItems:"center"})),z=(0,h.zo)({display:"flex",flex:"grow",direction:"column",gap:4}),P=(0,c.createContext)({popToast:()=>{throw Error("Popping toast requires a ToastProvider.")},addOffset:()=>{}});function T(e){let{children:r}=e,[t,i]=(0,c.useState)(null),[n,a]=(0,c.useState)("hidden"),[u,s]=(0,c.useState)(0),d=(0,c.useRef)(null),h=()=>{a("hidden")};return(0,l.BX)(P.Provider,{value:{popToast:function(e){let{ttl:r=4e3}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};i({element:e({onClose:h}),ttl:r}),a("visible"),null!=d.current&&clearTimeout(d.current),d.current=null===r?null:setTimeout(h,r)},addOffset:e=>{s(Math.min(u+e,0))}},children:[r,(0,l.tZ)(k,{offset:u,children:(0,l.tZ)(o.u,{appear:!0,show:!!t&&"visible"===n,className:Z.Z.transition,enterFrom:Z.Z.hide,enterTo:Z.Z.show,leaveFrom:Z.Z.show,leaveTo:Z.Z.hide,onMouseEnter:()=>null!=d.current&&clearTimeout(d.current),onMouseLeave:()=>{null!=d.current&&clearTimeout(d.current),t&&(d.current=null===t.ttl?null:setTimeout(h,t.ttl))},children:null==t?void 0:t.element})})]})}function k(e){let{children:r,offset:t}=e,i=(0,b.XA)();return(0,l.tZ)(h.xu,{position:"fixed",sizing:"border-box",style:{left:i?16:"auto",right:16,bottom:16,zIndex:f.Qq,transform:"translateY(".concat(t,"px)")},role:"region","aria-label":"Notification",children:r})}let A=e=>{let r=(0,c.forwardRef)((r,t)=>{let o=F();return(0,l.tZ)(e,(0,n._)((0,i._)({},o,r),{ref:t}))});return r.displayName="withToastContext(".concat(e.name||e.displayName||"Anonymous",")"),r};function F(){return(0,c.useContext)(P)}}}]);