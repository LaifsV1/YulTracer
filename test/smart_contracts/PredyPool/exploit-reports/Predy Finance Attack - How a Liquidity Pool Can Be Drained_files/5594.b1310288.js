"use strict";(self.webpackChunksubstack=self.webpackChunksubstack||[]).push([["5594"],{42725:function(t,e,n){n.d(e,{pc:()=>r}),n(16584),n(6400),n(30396),n(14068),n(68833),n(62981),n(15771),n(19081),n(58175),n(35144);let r="clip_web_nux_seen_at"},72392:function(t,e,n){n.d(e,{o:()=>y});var r=n(16584),i=n(30396),o=n(94184),a=n.n(o),l=n(95441),s=n(98914),d=n(15771),c=n(19081),p=n(84747),u=n(63474),m=n(58175),h=n(81821),v=n(98550);let b=t=>{let[e,n]=(0,i.eJ)(null);return(0,i.d4)(()=>{let e=[];return t.forEach(t=>{let r=(0,s.VA)(t.text.toLowerCase(),!0),i=document.getElementById("\xa7".concat(r));if(i){let t=new IntersectionObserver(t=>{t.forEach(t=>{t.isIntersecting&&t.intersectionRatio>=.8&&n(r)})},{threshold:.5,rootMargin:"0px 0px -90% 0px"});t.observe(i),e.push(t)}}),()=>e.forEach(t=>t.disconnect())},[t]),e},f=t=>t?/^H[1-5]$/i.test(t.tagName)?t:f(t.parentElement):null,g=t=>{let{toc:e,minLevel:n,activeItem:i}=t;return(0,r.tZ)(c.tu,{gap:12,paddingY:12,paddingX:8,alignItems:"end",children:e.map((t,e)=>{let o=t.level-n,l="indent-".concat(Math.min(o,3)),d=(0,s.VA)(t.text.toLowerCase(),!0);return(0,r.tZ)("div",{className:a()(v.Z.line,v.Z[l],i===d&&v.Z.active)},e)})})},Z=t=>{let{toc:e,minLevel:n,activeItem:i,onItemClick:o}=t,{iString:d}=(0,l.M1)();return(0,r.BX)(c.tu,{gap:4,flex:"grow",children:[(0,r.tZ)(m.xv.Meta,{padding:4,color:"primary",children:d("Contents")}),e.map((t,e)=>{let l=(0,s.VA)(t.text.toLowerCase(),!0),d=t.level-n,p="indent-".concat(Math.min(d,3));return(0,r.tZ)(u.A0,{href:"#\xa7".concat(l),onClick:t=>{t.preventDefault(),o(l)},children:(0,r.tZ)(c.gq,{padding:4,className:a()(v.Z.row),children:(0,r.tZ)(m.xv.B3,{className:a()(v.Z.label,v.Z[p],i===l&&v.Z.active),ellipsis:!0,children:t.text})})},e)})]})},y=t=>{let{toc:e,position:n="fixed"}=t,{iString:o}=(0,l.M1)(),s=Math.min(...e.map(t=>t.level)),[c,u]=(0,i.eJ)(null),m=b(e);return e.length<2||(0,h.tq)()?null:(0,r.tZ)(p.M,{trigger:t=>{let{ref:i,onClick:l}=t;return(0,r.tZ)(d.kG,{ref:i,onClick:l,className:a()(v.Z.trigger,v.Z[n]),"aria-label":o("Table of Contents"),position:n,children:(0,r.tZ)(g,{toc:e,minLevel:s,activeItem:m})})},customShowClass:v.Z.show,customHideClass:v.Z.hide,layerClassName:v.Z.menu,layerOptions:{placement:"right-center",triggerOffset:8},children:(0,r.tZ)(Z,{toc:e,minLevel:s,activeItem:m,onItemClick:t=>{let e=document.getElementById("\xa7".concat(t));if(e){let n=f(e);if(n){if(c){let t=document.getElementById("\xa7".concat(c)),e=t?f(t):null;null==e||e.classList.remove("highlight")}n.classList.add("highlight"),u(t),e.scrollIntoView({behavior:"smooth",block:"start"})}}}})})}},59708:function(t,e,n){let r;n.d(e,{Kd:()=>j,N1:()=>K});var i,o=n(7409),a=n(99282),l=n(16584),s=n(6400),d=n(70109),c=n(94184),p=n.n(c),u=n(60826),m=n(4373),h=n(62049),v=n(16564),b=n(17117),f=n(36441),g=n(78435),Z=n(80836),y=n(3258),w=n(33665),_=n(95441),C=n(57796),x=n(26989),N=n(98914),S=n(55706),A=n(19081),I=n(32700),k=n(93903),L=n(60308),M=n(26111),E=n(81821),F=n(64314);let O=(t,e)=>{var n,r,i,a;return(0,l.tZ)("div",{className:"subscription-widget-wrap",children:(0,l.BX)("div",{className:"subscription-widget show-subscribe",children:[(0,l.tZ)("div",{className:"preamble",children:(0,l.tZ)("p",{dangerouslySetInnerHTML:{__html:null!==(a=null===(i=t.children[0])||void 0===i?void 0:null===(r=i.children[0])||void 0===r?void 0:null===(n=r.children[0])||void 0===n?void 0:n.innerHTML)&&void 0!==a?a:""}})}),(0,l.tZ)(w.Z,(0,o._)({pub:e.pub,subscribeButtonAttrs:null,source:"subscribe-widget-preamble"},e.props))]})})},T=(t,e)=>{try{let n=JSON.parse((0,k.Z)(t.getAttribute("data-attrs")));if(["".concat(e.pub.base_url,"/subscribe?"),"".concat(e.pub.base_url,"/subscribe?plan=founding"),u.W.CHECKOUT_URL,u.W.FOUNDING_CHECKOUT_URL].includes(n.url)){let n=JSON.parse((0,k.Z)(t.getAttribute("data-attrs")));return(0,l.tZ)(w.Z,(0,o._)({pub:e.pub,subscribeButtonAttrs:n},e.props))}}catch(t){console.error("Failed to parse button:",t)}return null},H=(t,e)=>{let{pub:n,props:{isStatic:r,post:i}}=e;try{let e=t.getAttribute("data-attrs");if(e){let t=JSON.parse((0,k.Z)(e));return r?(0,l.tZ)(v.nO,{label:t.label,pub:n,post:i,duration:t.duration}):(0,l.tZ)(v.cM,{label:t.label,pub:n,post:i,src:"/api/v1/audio/upload/".concat(t.mediaUploadId,"/src"),duration:t.duration,autoPlay:!1,mediaUpload:{id:t.mediaUploadId}})}}catch(t){console.error("Failed to parse audio:",t)}return null},V=(t,e)=>{let{pub:n,props:{isStatic:r,post:i}}=e;try{let e=t.getAttribute("data-attrs");if(e){let t=JSON.parse((0,k.Z)(e));return r?(0,l.tZ)(v.nO,{label:t.label,pub:n,post:i,duration:t.duration}):(0,l.tZ)(v.cM,{label:t.label,pub:n,post:i,src:t.url,duration:t.duration,autoPlay:!1})}}catch(t){console.error("Failed to parse audio:",t)}return null},J=(t,e)=>{let{props:{isStatic:n}}=e;try{let e=t.getAttribute("data-attrs");if(e){let{name:t,avatarUrl:r,url:i}=JSON.parse((0,k.Z)(e));return n?(0,l.tZ)(S.W,{name:t,avatarUrl:r,url:i}):(0,l.tZ)(S.R,{name:t,avatarUrl:r,url:i})}}catch(t){console.error("Failed to parse audio:",t)}return null},D=t=>{try{let e=JSON.parse(t.dataset.attrs).symbol;if(e)return(0,l.tZ)(b.Z,{symbol:e,prependSymbol:JSON.parse(t.dataset.attrs).prependSymbol,isStatic:JSON.parse(t.dataset.attrs).isStatic});return(0,l.tZ)(l.HY,{})}catch(t){return console.error("failed to parse cashtag"),(0,l.tZ)(l.HY,{})}},P=(t,e)=>{let{pub:n,props:{isStatic:r}}=e,{iString:i}=I18N.i({pub:n});try{if(r){let e=t.getAttribute("data-attrs");if(e){let t=JSON.parse((0,k.Z)(e)),n=null==t?void 0:t.persistentExpression;return n?(0,l.tZ)("img",{src:(0,L.iJV)(n),style:{transform:"scale(0.5)"},"data-component-name":"LatexImg"}):(0,l.tZ)("p",{children:i("Failed to render LaTeX expression — no expression found in email")})}return(0,l.tZ)("p",{children:i("Failed to render LaTeX expression — data attributes not found")})}let e=t.getAttribute("data-attrs"),n=JSON.parse((0,k.Z)(e)),o=null==n?void 0:n.persistentExpression;return o?(0,l.tZ)(A.gq,{className:"latex-rendered",justifyContent:"center",flex:"grow",paddingBottom:"4px",paddingTop:"4px","data-component-name":"Latex",children:(0,l.tZ)(A.tu,{justifyContent:"center",children:(0,l.tZ)(d.Z,{inline:!1,children:"\\(".concat(o,"\\)")})})}):(0,l.tZ)("p",{children:i("Failed to render LaTeX expression — no expression found")})}catch(t){return console.error("failed to render mathjax",t),(0,l.tZ)("p",{children:i("Failed to render LaTeX expression — error")})}},B=t=>{try{let{name:e,id:n,type:r,url:i,photo_url:o,uuid:a,isStatic:s}=JSON.parse(t.dataset.attrs);if(e)return(0,l.tZ)(y.ZP,{name:e,id:n,type:r,url:i,photo_url:o,uuid:a,isStatic:s});return(0,l.tZ)(l.HY,{})}catch(t){return(0,l.tZ)(l.HY,{})}},U=(t,e)=>{try{let i=JSON.parse((0,k.Z)(t.getAttribute("data-attrs")));if(null==i?void 0:i.isEmail){var n,r;return(0,l.tZ)("table",{className:"poll-embed poll-email",cellSpacing:"16px",width:"100%",children:(0,l.tZ)("tbody",{children:(0,l.tZ)("tr",{children:(0,l.tZ)("td",{align:"center",children:(0,l.tZ)(g.kq,{id:i.id,embeddedPolls:null!==(r=null===(n=e.props.dataForEmailRender)||void 0===n?void 0:n.embeddedPolls)&&void 0!==r?r:[],pub:e.pub})})})})})}return(0,l.tZ)("div",{className:"poll-embed",dataAttrs:t.getAttribute("data-attrs"),children:(0,l.tZ)(g.n_,{id:i.id,isEditor:!1,post:e.props.post,isVersionView:!!e.props.isVersionView})})}catch(t){return console.error("Failed to parse poll:",t),(0,l.tZ)(l.HY,{})}},R=(t,e,n)=>{var r;let[i,,o]=t.id.split("-"),a=null===(r=n.wrapper.querySelector("#".concat(i,"-").concat(o)))||void 0===r?void 0:r.nextElementSibling;return a?((0,E.tq)()&&(t.href="#_"),(0,l.tZ)(I.z,{content:(0,l.tZ)("div",{className:"markup",children:Y(a,e,n)}),className:"footnote-hovercard-target",dontStopPropagation:!0,layerClassName:"typography footnote-hovercard",as:"span",children:Y(t,e,n)})):Y(t,e,n)},q=(t,e)=>(0,l.tZ)(_._7,{language:e,children:t}),X=function(t,e){var n,r,i;let{shallow:a}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if("A"!==t.nodeName||t.getAttribute("rel")||t.setAttribute("rel","pub"in e&&(null===(i=e.pub)||void 0===i?void 0:i.no_follow)?"nofollow ugc noopener":""),(0,N.pv)(t,"image2")&&(null===(n=e.props)||void 0===n?void 0:n.canRestackImage)&&t.classList.add("can-restack"),"pub"in e&&e.pub&&"P"===t.nodeName&&(0,N.pv)(t,"button-wrapper")){let n=T(t,e);if(n)return n;let r=(0,f.TW)(t,e);if(r)return r}let d="pub"in e&&(null===(r=e.pub)||void 0===r?void 0:r.language)||"en";return(0,N.pv)(t,"subscription-widget-wrap-editor")||(0,N.pv)(t,"subscription-widget-wrap")?q(O(t,e),d):(0,N.pv)(t,"cashtag-wrap")?q(D(t),d):(0,N.pv)(t,"mention-wrap")?q(B(t),d):"pub"in e&&e.pub&&(0,N.pv)(t,"native-audio-url-embed")?q(V(t,e),d):"pub"in e&&e.pub&&(0,N.pv)(t,"native-audio-embed")?q(H(t,e),d):"pub"in e&&e.pub&&(0,N.pv)(t,"native-video-embed")?q((0,f.tj)(t,e),d):"pub"in e&&e.pub&&(0,N.pv)(t,"meeting-embed")?q(J(t,e),d):(0,N.pv)(t,"poll-embed")?q(U(t,e),d):(0,N.pv)(t,"recipe-embed")?q((0,f.G3)(t,e),d):(0,N.pv)(t,"pinterest-embed")?q((0,f.EK)(t),d):(0,N.pv)(t,"sponsorship-campaign-embed")?q((0,f.b3)(t,e),d):(0,N.pv)(t,"image-gallery-embed")?q((0,f.W5)(t,e),d):(0,N.pv)(t,"image3")?q((0,f.L0)(t,e),d):(0,N.pv)(t,"directMessage")?q((0,f.Gz)(t,e),d):(0,N.pv)(t,"latex-rendered")?q(P(t,e),d):(0,N.pv)(t,"community-chat")?q(function(t,e){let{props:{isStatic:n}}=e;try{let e=t.getAttribute("data-attrs"),r=JSON.parse((0,k.Z)(e));if(!r.pub||!r.subdomain)return console.error("could not deepPrepare communityChat, subdomain or pub missing from node"),(0,l.tZ)(s.Fragment,{});return(0,l.tZ)("div",{className:"community-chat",dataAttrs:e,children:n?(0,l.tZ)(m.C,(0,o._)({},r)):(0,l.tZ)(m.a,{pub:r.pub,subdomain:r.subdomain})})}catch(t){return console.error("Failed to parse chat embed:",t),(0,l.tZ)(s.Fragment,{})}}(t,e),d):(0,N.pv)(t,"community-post")?q(function(t,e){let{props:{isStatic:n,is_freemail:r}}=e;try{let e=t.getAttribute("data-attrs"),i=JSON.parse((0,k.Z)(e));return n?(0,l.tZ)(h.s,(0,o._)({is_freemail:r},i)):(0,l.tZ)(h.V,(0,o._)({},i))}catch(t){return console.error("Failed to parse chat post embed:",t),(0,l.tZ)(s.Fragment,{})}}(t,e),d):(0,N.pv)(t,"digest-post-embed")?q((0,f.Do)(t,e),d):(0,N.pv)(t,"comment")&&!(0,N.pv)(t,"template-comment")?q(function(t,e){let{props:{isStatic:n}}=e;try{let e=t.getAttribute("data-attrs"),r=JSON.parse((0,k.Z)(e));return n?(0,l.tZ)(x.Eo,(0,o._)({},r)):(0,l.tZ)(C.d,(0,o._)({},r))}catch(t){return console.error("Failed to parse chat post embed:",t),(0,l.tZ)(s.Fragment,{})}}(t,e),d):(0,N.pv)(t,"referrals-tier-card")?q((0,f.mx)(t,e),d):("undefined"!=typeof window&&(0,N.pv)(t,"file-embed-button")&&"href"in t&&t.href&&!(0,M.x)(t.href,"token")&&(t.href=(0,L.n1t)(t.href,{token:(0,M.x)(window._preloads.original_url,"token")})),"props"in e&&e.props&&"post"in e.props&&e.props.post&&"object"==typeof e.props.post&&"id"in e.props.post&&e.props.post.id&&(0,N.pv)(t,"footnote")&&(t.id&&(t.id+="-".concat(e.props.post.id)),"href"in t&&t.href&&(t.href+="-".concat(e.props.post.id))),(0,N.pv)(t,"footnote-anchor"))?q(R(t,X,e),d):a?null:Y(t,X,e)},W=function(t){let e={};for(let{name:n,value:r}of Array.prototype.slice.call(t))e[n]=r;return e},Y=(i=(t,e,n,r)=>{var i;if(!t)throw Error("Empty node, cannot preactify!");let d=3===t.nodeType?"span":8===t.nodeType?"x_preact_compatible_html_comment_x":t.tagName.toLowerCase(),c=1!==t.nodeType?{}:W(t.attributes),u=t.children&&t.children.length>0?null:t.textContent;if(r||"script"===d&&t.innerHTML===F.N)return(0,s.h)(d,(0,a._)((0,o._)({},c),{dangerouslySetInnerHTML:{__html:t.innerHTML}}));let m=!!(null===(i=t.parentElement)||void 0===i?void 0:i.getAttribute("data-prose-mirror-wrapper"));if(n&&"pub"in n&&m&&["h1","h2","h3","h4"].includes(d)&&!t.className)return function(t,e,n,r){var i,d,c,u;let m=p()("header-anchor-post",e.className),h=n.children.length?Array.prototype.map.call(n.childNodes,t=>X(t,r)):[n.textContent];return(0,s.h)(t,(0,a._)((0,o._)({},e),{className:m}),...h,(0,l.tZ)(Z.Z,{text:null!==(c=n.textContent)&&void 0!==c?c:"",pub:null==r?void 0:r.pub,post:null==r?void 0:null===(i=r.props)||void 0===i?void 0:i.post,offsetTop:!0,isAboutPage:null!==(u=null==r?void 0:null===(d=r.props)||void 0===d?void 0:d.isAboutPage)&&void 0!==u&&u}))}(d,c,t,n);if(u)return(0,s.h)(d,c,u);let h=e(t,n,{shallow:!0});return h||(0,s.h)(d,c,...Array.prototype.map.call(t.childNodes,t=>e(t,n)))},r=0,function(){let t=[].slice.call(arguments,0),e=++r>2500;if(e){var n,o,a;console.error("Too many post nodes to recurse",{postId:null===(a=t[2])||void 0===a?void 0:null===(o=a.props)||void 0===o?void 0:null===(n=o.post)||void 0===n?void 0:n.id,depth:r})}let l=i.apply(null,[...t,...e?[!0]:[]]);return r--,l});function j(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=document.createElement("div");return r.setAttribute("data-prose-mirror-wrapper","1"),r.innerHTML=t,Array.prototype.map.call(r.childNodes,t=>Y(t,X,{wrapper:r,pub:e,props:n}))}function K(t,e){if("undefined"==typeof window)return[];let n=document.createElement("div");n.innerHTML=t;let r=[];for(let t of n.querySelectorAll(null!=e?e:"h1, h2, h3, h4")){var i,o;let e=t.tagName[1],n=e?parseInt(e):NaN;r.push({level:null!=n?n:0,text:null!==(i=t.textContent)&&void 0!==i?i:"",id:null!==(o=t.id)&&void 0!==o?o:""})}return r}},31852:function(t,e,n){n.d(e,{Z:()=>s});var r=n(7409),i=n(99282),o=n(98848),a=n(16584),l=n(64515);let s=t=>{var{size:e=24,color:n="var(--color-fg-primary)"}=t,s=(0,o._)(t,["size","color"]);return(0,a.tZ)(l.l,(0,i._)((0,r._)({},s),{name:"BigQuoteIcon",svgParams:{viewBox:"0 0 27 17"},stroke:"none",width:e,height:e,fill:n,children:(0,a.tZ)("path",{d:"M11.7188 10.6172C11.7188 7.5 9.41016 5.01562 6.43359 5.01562C5.03906 5.01562 3.71484 5.56641 2.74219 6.64453H2.42578C3.10547 4.42969 5.16797 2.57812 7.73438 1.81641C8.09766 1.69922 8.36719 1.59375 8.53125 1.45312C8.71875 1.30078 8.82422 1.11328 8.82422 0.84375C8.82422 0.351562 8.44922 0.0117188 7.89844 0.0117188C7.53516 0.0117188 7.25391 0.0820312 6.75 0.246094C5.13281 0.773438 3.67969 1.69922 2.55469 2.88281C0.972656 4.52344 0 6.71484 0 9.31641C0 13.7109 2.78906 16.2539 6.05859 16.2539C9.28125 16.2539 11.7188 13.793 11.7188 10.6172ZM25.793 10.6172C25.793 7.5 23.4727 5.01562 20.5078 5.01562C19.1133 5.01562 17.7773 5.56641 16.8164 6.64453H16.5C17.1797 4.42969 19.2422 2.57812 21.7969 1.81641C22.1602 1.69922 22.4414 1.59375 22.6055 1.45312C22.793 1.30078 22.8867 1.11328 22.8867 0.84375C22.8867 0.351562 22.5234 0.0117188 21.9727 0.0117188C21.5977 0.0117188 21.3281 0.0820312 20.8125 0.246094C19.207 0.773438 17.7422 1.69922 16.6172 2.88281C15.0469 4.52344 14.0742 6.71484 14.0742 9.31641C14.0742 13.7109 16.8633 16.2539 20.1328 16.2539C23.3555 16.2539 25.793 13.793 25.793 10.6172Z"})}))}},58319:function(t,e,n){n.d(e,{Z:()=>d});var r=n(27412),i=n(16584),o=n(6400),a=n(94184),l=n.n(a),s=n(98914);class d extends o.Component{async componentDidMount(){"undefined"!=typeof window&&(this.ref||await new Promise(t=>setTimeout(t,0)),this.checkVisibility(),(this.props.parent||window).addEventListener("scroll",this.checkVisibility))}componentWillUnmount(){"undefined"!=typeof window&&(this.props.parent||window).removeEventListener("scroll",this.checkVisibility)}render(t){let{className:e,children:n}=t;return(0,i.tZ)("div",{ref:this.assignRef,className:l()("visibility-check",e),children:n})}constructor(...t){super(...t),(0,r._)(this,"ref",void 0),(0,r._)(this,"assignRef",t=>{this.ref=t}),(0,r._)(this,"checkVisibility",()=>{if(!this.ref)return;let t=this.ref.getBoundingClientRect(),e=this.props.threshold||0,n=this.props.parent?this.props.parent.clientHeight:Math.max(document.documentElement.clientHeight,window.innerHeight),r=!(t.bottom<0-e||t.top>=n+e);(0,s.nn)(this,async(t,e)=>{if(t.isVisible!==r)this.setState({isVisible:r});else if(!e.noDedupe)return;let n=r?"hadFirstVisible":"hadFirstInvisible",i=!t[n];i&&this.setState({[n]:!0}),(await Promise.all([r&&e.onVisible&&e.onVisible(),r&&e.onFirstVisible&&i&&e.onFirstVisible(),!r&&e.onInvisible&&e.onInvisible(),!r&&e.onFirstInvisible&&i&&e.onFirstInvisible()])).reduce((t,e)=>!0===e||t)&&this.checkVisibility()})})}}},4796:function(t,e,n){n(16584),n(30396),n(98661),n(80569),n(95441),n(6400),n(68833),n(15771),n(61254),n(19081),n(84747),n(61468)},6091:function(t,e,n){n.d(e,{N:()=>c});var r=n(16584),i=n(32351),o=n(32129);n(30396),n(94184),n(31852),n(28161),n(3880),n(77338),n(5952);var a=n(98170);n(25642),n(16451),n(94874),n(71068),n(61254),n(19081),n(58175),n(27661),n(23398),n(98012),n(60308);var l=n(63651);n(5749);var s=n(33884),d=n(84864);function c(t){var e,n,c,p;let u,m,h,{comment:v,post:b,publication:f}=t,g="Substack | Notes";f&&v.name?g="".concat(v.name," on ").concat(f.name):v.name?g="".concat(v.name," on Substack"):f&&(g="".concat(f.name));let Z=b&&f?(0,o.getPageTitleAndMeta)(b,f,{isCommentPage:!0}).title:"".concat(g,': "').concat((0,d.truncateText)(v.body,280),'"'),y=(null!==(e=v.attachments)&&void 0!==e?e:[]).filter(t=>"image"===t.type),w=1===y.length?y[0]:null,_=w&&"imageUrl"in w?w.imageUrl:void 0;_?u=_:function(t){let{linkAttachment:e,imageAttachments:n,videoAttachments:r,quoteAttachments:i}=function(t){var e,n,r,i,o,a,l;let s=null===(e=t.attachments)||void 0===e?void 0:e.find(t=>["post","comment","link","publication"].includes(t.type)),d=null!==(o=null===(n=t.attachments)||void 0===n?void 0:n.filter(t=>"image"===t.type))&&void 0!==o?o:[];return{linkAttachment:s,imageAttachments:d,videoAttachments:null!==(a=null===(r=t.attachments)||void 0===r?void 0:r.filter(t=>"video"===t.type))&&void 0!==a?a:[],quoteAttachments:null!==(l=null===(i=t.attachments)||void 0===i?void 0:i.filter(t=>"post"===t.type&&!!t.postSelection))&&void 0!==l?l:[]}}(t);return!!e&&("comment"===e.type||"post"===e.type&&null!==(0,a.FK)({post:e.post,compact:!1,readOnly:!0}))||n.length>0||r.length>0||i.length>0}(v)&&(m=680,h=680,u=(0,l.zF4)((0,s.IY)(v.id,{isSmall:!0,attachmentsOnly:!0}),h,{height:m}));let C=null!==(n=v.body)&&void 0!==n?n:"";return(0,r.tZ)(i.Metadata,{title:Z,socialTitle:g,description:C,image:u,imageHeight:m,imageWidth:h,isLargeImage:!!u||void 0,siteName:f?f.name:"Substack",publishedTime:v.date.toString(),meta:[{name:"twitter:label1",content:"Likes"},{name:"twitter:data1",content:String(null!==(c=v.reaction_count)&&void 0!==c?c:0)},{name:"twitter:label2",content:"Replies"},{name:"twitter:data2",content:String(null!==(p=v.children_count)&&void 0!==p?p:0)}]})}},62981:function(t,e,n){n.d(e,{Z:()=>s});var r=n(30396),i=n(68833),o=n(59176),a=n(98012);let l=()=>{};function s(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:l,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,[s,c]=(0,r.eJ)(!!t&&d(t,e,a));return((0,r.d4)(()=>{t&&c(d(t,e,a));let n=()=>{c(!0)};if(t){document.addEventListener("dismiss: ".concat(t),n,!1);let e=(0,o.mM)("".concat(t,"-seen-count"))||0;(!a||e<a)&&(0,o.ex)("".concat(t,"-seen-count"),e+1)}return()=>{document.removeEventListener("dismiss: ".concat(t),n)}},[t]),t)?[s,()=>{n(),(0,i.j)(i.FP.DASHBOARD_ACTION_BOX_DISMISSED,{key:t});let e=new Date;(0,o.ex)(t,e.toString()),c(!0);let r=new Event("dismiss: ".concat(t));document.dispatchEvent(r)}]:[!0,l]}function d(t,e,n){let r;let i="undefined"==typeof window?new Date().toString():(0,o.mM)(t),l="undefined"==typeof window?0:(0,o.mM)("".concat(t,"-seen-count")),s=i||n&&l>=n;return s&&e?(0,a.Z)(i).add(e,"second").isAfterNow():!!(i||s)}},2748:function(t,e,n){n.d(e,{F:()=>o});var r=n(1835),i=n(84864);function o(t,e){var n,o,a,l;let s,d;let c=null===(n=t.name)||void 0===n?void 0:n.trim(),p=c;(0,i.endsWithPunctuation)(c)&&(p='"'.concat(c,'"'));let u=(0,r.Im)(t.contributors);return t.invite_only?(s=null,d=null):(s=(null===(a=t.rankingDetailFreeIncluded)||void 0===a?void 0:a.toLowerCase().includes("subscribers"))?t.rankingDetailFreeIncluded.toLowerCase():null,d=t.rankingDetailFreeIncluded||t.rankingDetail),(0,r.ab)(null!==(l=null!=e?e:null===(o=t.hero_text)||void 0===o?void 0:o.trim())&&void 0!==l?l:"",u,s,p,d)}},61468:function(t,e,n){n.d(e,{Ap:()=>l});var r=n(7409),i=n(99282);n(56303);var o=n(14293),a=n.n(o);n(84864);let l=t=>{let{rows:e,maxWordsPerRow:n=60}=t;if(a()(e[0]))return[];let o=[],l=(0,i._)((0,r._)({},e[0]),{words:e[0].words.map(t=>(0,i._)((0,r._)({},t),{originalIndex:0}))});for(let t=1;t<e.length;t++){let a=e[t];if(!a)continue;let s=(0,i._)((0,r._)({},a),{words:a.words.map(e=>(0,i._)((0,r._)({},e),{originalIndex:t}))});l.speaker===s.speaker&&l.words.length+s.words.length<=n?l={start:l.start,end:s.end,text:"".concat(l.text," ").concat(s.text),words:l.words.concat(...s.words),speaker:l.speaker}:(o.push(l),l=s)}return o.push(l),o}},93370:function(t,e,n){n.d(e,{DL:()=>i,Jk:()=>a,UB:()=>r,ZD:()=>l,fI:()=>o});let r=t=>{let e=Math.floor(t/60),n=Math.floor(t%60);return"".concat(e,":").concat(n.toString().padStart(2,"0"))};function i(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(t<0)return"0:00";let n=Math.floor(t),r=Math.floor(n/60),i=n%60;if(e){let e=Math.round((t-n)*10);return"".concat(r,":").concat(String(i).padStart(2,"0"),".").concat(e)}return"".concat(r,":").concat(String(i).padStart(2,"0"))}let o=t=>/^[0-9.:]*$/.test(t),a=t=>/^(?:(?:[0-9]{1,3}):)?(?:[0-5][0-9]|[0-9]{1,2})(?:\.[0-9]{1,3})?$/.test(t),l=t=>{let[e="",n=""]=t.split("."),r=e.split(":").reverse().map(t=>parseInt(t)),i=r[0]||0,o=r[1]||0;return 3600*(r[2]||0)+60*o+i+parseInt(n.padEnd(3,"0"))/1e3}}}]);