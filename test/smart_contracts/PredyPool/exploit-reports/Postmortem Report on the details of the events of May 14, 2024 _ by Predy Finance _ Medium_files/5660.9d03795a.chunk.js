"use strict";(self.webpackChunklite=self.webpackChunklite||[]).push([[5660],{49470:(e,n,i)=>{i.d(n,{A:()=>o});var t,a=i(96540);function l(){return l=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var i=arguments[n];for(var t in i)({}).hasOwnProperty.call(i,t)&&(e[t]=i[t])}return e},l.apply(null,arguments)}const o=function(e){return a.createElement("svg",l({xmlns:"http://www.w3.org/2000/svg",width:24,height:24,fill:"none",viewBox:"0 0 24 24"},e),t||(t=a.createElement("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",d:"M12 21a9 9 0 1 0 0-18 9 9 0 0 0 0 18M8.25 12h7.5"})))}},94971:(e,n,i)=>{i.d(n,{C:()=>d});var t=i(96540),a=i(52290),l=i(86527),o=i(46879);function d(e){var n=e.entityName,i=void 0===n?"story":n;return t.createElement(a.a,{textAlign:"center",testId:"deleteStoryModalText"},"Deletion is not reversible, and the story will be completely deleted. If you do not want to delete, you can"," ",t.createElement(l.N,{target:"_blank",href:o.Xj4,inline:!0,linkStyle:"OBVIOUS"},"unlist the ",i),".")}},43849:(e,n,i)=>{i.d(n,{$:()=>k,J:()=>c});var t=i(5544),a=i(96540),l=i(44402),o=i(42976),d=i(60603),r=i(8963),s=i(34507),m=function(e){return{overflow:"hidden",transition:"opacity 300ms ease".concat(e?"":" 300ms",", max-height 300ms ease").concat(e?" 300ms":""),maxHeight:e?"0":"450px",opacity:e?0:1}},u=(0,a.createContext)({});function c(e){var n=e.children,i=e.post,c=(0,l.l)(),k=(0,a.useRef)(!1),p=(0,s.K)(i.id,"cache-only").explicitSignal,v=(0,a.useState)(p===o.WN.SHOW_LESS),N=(0,t.A)(v,2),S=N[0],g=N[1],f=(0,d.e)(!1),b=(0,t.A)(f,3),y=b[0],h=b[1],E=b[2],F=(0,a.useCallback)((function(e){S&&k.current&&"max-height"===e.propertyName&&(h(),k.current=!1)}),[S]),C=(0,a.useCallback)((function(){k.current=!0,g(!0)}),[]),w=(0,a.useCallback)((function(){g(!1)}),[]),P=(0,a.useMemo)((function(){return{animateShowLess:C,animateUndo:w}}),[C,w]);return a.createElement(u.Provider,{value:P},a.createElement("div",{className:c(m(S)),onTransitionEnd:F},n),a.createElement(r.b,{post:i,isVisible:y,hide:E}))}var k=function(){return(0,a.useContext)(u)}},8963:(e,n,i)=>{i.d(n,{b:()=>F});var t,a=i(5544),l=i(96540),o=i(17045),d=i(53843),r=i(2550),s=i(21335),m=i(71984),u=i(52290),c=i(94170),k=i(49287),p=i(42976),v=i(60603),N=i(55981),S=i(36557),g=i(44402);function f(){return f=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var i=arguments[n];for(var t in i)({}).hasOwnProperty.call(i,t)&&(e[t]=i[t])}return e},f.apply(null,arguments)}const b=function(e){return l.createElement("svg",f({xmlns:"http://www.w3.org/2000/svg",width:24,height:24,fill:"none",viewBox:"0 0 24 24"},e),t||(t=l.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M4.292 9.5v5H2v-5zm1-.124v5.248l.105.08L13 20.484V3.516l-7.603 5.78zm7.905-7.266L4.792 8.5H1.5A.5.5 0 0 0 1 9v6a.5.5 0 0 0 .5.5h3.292l8.405 6.39a.5.5 0 0 0 .803-.398V2.508a.5.5 0 0 0-.803-.398m5.657 7.035a.5.5 0 0 0-.708.707L20.293 12l-2.147 2.148a.5.5 0 1 0 .708.707L21 12.707l2.146 2.148a.5.5 0 1 0 .708-.707L21.707 12l2.147-2.148a.5.5 0 1 0-.708-.707L21 11.293z",clipRule:"evenodd"})))};var y=function(e){return function(n){return{padding:"16px 24px",border:"none",cursor:"pointer",display:"flex","&:first-of-type":{paddingTop:"20px"},"&:last-of-type":{paddingBottom:"20px"},"&:not(:last-of-type)":{borderBottom:"1px solid ".concat(n.colorTokens.border.neutral.primary.base)},"& svg path":{fill:e?n.colorTokens.foreground.error.primary.base:n.colorTokens.foreground.neutral.secondary.base},":hover svg path":{fill:e?n.colorTokens.foreground.error.primary.hover:n.colorTokens.foreground.neutral.primary.base}}}};function h(e){var n=e.onClick,i=e.isReport,t=e.text,a=e.detail,o=(0,g.l)();return l.createElement("button",{className:o(y(i)),onClick:n},i?l.createElement(N.n,null):l.createElement(b,null),l.createElement(u.a,{marginLeft:"24px",display:"flex",flexDirection:"column",gap:"4px",textAlign:"left"},l.createElement(S.kZ,{scale:"M",color:i?"ERROR":"DARKER",clamp:1},t),a&&l.createElement(S.kZ,{scale:"S",clamp:1},a)))}var E=i(34507);function F(e){var n,i,t=e.hide,d=e.isVisible,u=e.post,c=null!==(n=null===(i=u.creator)||void 0===i?void 0:i.id)&&void 0!==n?n:"",p=(0,s.cd)(c).viewerEdge,N=(0,r.A)().viewerId,S=(0,v.e)(!1),g=(0,a.A)(S,3),f=g[0],b=g[1],y=g[2],h=(0,o.M)({viewerId:N,targetAuthorId:c,targetPostId:u.id,onOptimisticComplete:y}),E=(0,l.useCallback)((function(){b(),t()}),[t]);return l.createElement(l.Fragment,null,d&&l.createElement(k.Ne,{source:{dimension:"negative_signal_modal"},extendSource:!0},l.createElement(C,{post:u,report:E,hide:t})),l.createElement(m.e,{isVisible:f,hide:y,type:"story",alreadyBlocking:!(null==p||!p.isBlocking),onSubmit:h}))}function C(e){var n=e.post,i=e.report,t=e.hide,o=(0,l.useState)(!1),d=(0,a.A)(o,2),r=d[0],s=d[1],m=(0,E.K)(n.id),k=m.undo,v=m.showUndoToast,N=(0,l.useCallback)((function(){r&&(v(p.WN.SHOW_LESS),s(!1)),t()}),[r,t]),S=(0,l.useCallback)((function(){k(),s(!0)}),[k]);return l.createElement(c.a,{hide:N,title:"Got it, we'll recommend fewer like this",subtitleTextAlign:"center",subtitle:"You can additionally take any of the actions below.",padding:"40px 32px 32px",subtitleMargin:"16px",confirmButtonStyle:"BRAND",confirmText:"Done",cancelText:"Undo",cancelButtonStyle:"SUBTLE",onCancel:S},l.createElement(u.a,{display:"flex",justifyContent:"center",marginBottom:"32px"},l.createElement(u.a,{width:"100%",maxWidth:"320px",display:"flex",flexDirection:"column",borderRadius:"8px",border:"neutral.primary"},n.creator&&!n.creator.viewerEdge.isMuting&&l.createElement(w,{publisher:n.creator,hide:t}),n.collection&&!n.collection.viewerEdge.isMuting&&l.createElement(w,{publisher:n.collection,hide:t}),l.createElement(h,{onClick:i,isReport:!0,text:"Report story..."}))))}function w(e){var n=e.publisher,i=e.hide,t="User"===n.__typename,a=(0,d.d)({authorId:t?n.id:void 0,collectionId:t?void 0:n.id}),o=a.muteAuthor,r=a.mutePub,s=(0,l.useCallback)((function(){t?o():r(),i()}),[o,r,t]);return l.createElement(h,{onClick:s,text:"Mute ".concat(t?"author":"publication"),detail:n.name})}},34507:(e,n,i)=>{i.d(n,{K:()=>f});var t=i(64467),a=i(5544),l=i(95420),o=i(95964),d=i(96540),r=i(2550),s=i(34317),m=i(49287),u=i(42976),c=i(91830),k=i(97249),p=i(43849),v={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"ExplicitSignalPostQuery"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"id"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"post"},arguments:[{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"id"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"NegativeSignalModal_post"}},{kind:"Field",name:{kind:"Name",value:"viewerEdge"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"explicitSignalState"}}]}}]}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"NegativeSignalModal_publisher"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Publisher"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"name"}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"NegativeSignalModal_post"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Post"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"creator"},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"NegativeSignalModal_publisher"}},{kind:"Field",name:{kind:"Name",value:"viewerEdge"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"isMuting"}}]}}]}},{kind:"Field",name:{kind:"Name",value:"collection"},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"NegativeSignalModal_publisher"}},{kind:"Field",name:{kind:"Name",value:"viewerEdge"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"isMuting"}}]}}]}}]}}]},N={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"ExplicitSignalMutation"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"postId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"signal"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ExplicitUserSignal"}}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"sendExplicitSignal"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"ObjectValue",fields:[{kind:"ObjectField",name:{kind:"Name",value:"postId"},value:{kind:"Variable",name:{kind:"Name",value:"postId"}}},{kind:"ObjectField",name:{kind:"Name",value:"signal"},value:{kind:"Variable",name:{kind:"Name",value:"signal"}}}]}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}}]}}]}}]};function S(e,n){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),i.push.apply(i,t)}return i}function g(e){for(var n=1;n<arguments.length;n++){var i=null!=arguments[n]?arguments[n]:{};n%2?S(Object(i),!0).forEach((function(n){(0,t.A)(e,n,i[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):S(Object(i)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(i,n))}))}return e}function f(e,n){var i,t,S=(0,s.$L)(),f=(0,m.Fo)()||{},b=(0,r.A)().viewerId,y=(0,c.zF)(),h=(0,p.$)().animateUndo,E=(0,l.n)(N),F=(0,a.A)(E,1)[0],C=(0,o.IT)(v,{variables:{id:e},fetchPolicy:n}),w=C.data,P=C.loading,A=null==w||null===(i=w.post)||void 0===i||null===(t=i.viewerEdge)||void 0===t?void 0:t.explicitSignalState,I=(0,d.useCallback)((function(n){F({variables:{postId:e,signal:n},update:function(i){b&&i.modify({id:"PostViewerEdge:".concat((0,k.N)(e,b)),fields:{explicitSignalState:function(){return n===u.WN.CLEAR_SIGNAL?null:n}}})}})}),[F,e,b]),T=(0,d.useCallback)((function(n){var i=n.name,t=n.data,a=n.dimension;return S.event(i,g({postId:e,source:a?(0,m.wv)(g(g({},f),{},{dimension:a})):(0,m.wv)(f)},t))}),[e,f]),D=(0,d.useCallback)((function(e){var n=A===u.WN.SHOW_MORE;I(u.WN.CLEAR_SIGNAL),T({name:"post.see_".concat(n?"more":"less",".undo"),dimension:e}),n?_(u.WN.SHOW_MORE):null==h||h()}),[e,A,h]),x=(0,d.useCallback)((function(){I(u.WN.SHOW_LESS),T({name:"post.see_less",data:{mutationSent:!0}})}),[T,I]),_=(0,d.useCallback)((function(e){y({message:"Undone. We won’t recommend ".concat(e===u.WN.SHOW_LESS?"fewer":"more"," stories like this."),extraParams:{hideCloseButton:!0}})}),[]);return{loading:P,undo:D,showLess:x,explicitSignal:A,showUndoToast:_}}},70521:(e,n,i)=>{i.d(n,{Z:()=>s});var t=i(58168),a=i(80045),l=i(96540),o=i(20036),d=i(24809),r=["isResponsive"],s=function(e){var n=e.isResponsive,i=(0,a.A)(e,r);return l.createElement(o.u,(0,t.A)({text:n?"More":void 0,icon:l.createElement(d.A,null)},i))}},19033:(e,n,i)=>{i.d(n,{G:()=>dn});var t=i(58168),a=i(80045),l=i(96540),o=i(5544),d=i(64467),r=i(14792),s=i.n(r),m=i(95964),u=i(90328),c=i(94971),k=i(45522),p=i(14782),v=i(86527),N=i(52290),S=i(85050);function g(e){var n=e.onClick,i=e.hidePopover,t=e.showAt,a=e.bookmarkIcon,o=(0,l.useCallback)((function(){i(),n()}),[n,i]);return l.createElement(S.V,{xs:t.xs,sm:t.sm,md:t.md,lg:t.lg,xl:t.xl},l.createElement(p.q3,null,l.createElement(v.N,{"aria-controls":"aria-id","aria-expanded":"false",onClick:o},l.createElement(N.a,{display:"flex",flexDirection:"row",alignItems:"center",ariaHidden:"true",gap:"12px"},a,"Save"))),l.createElement(p.eS,null))}var f=i(69415),b=i(36557),y=i(61333),h={width:"100%",display:"flex",justifyContent:"space-between",alignItems:"center"};function E(e){var n=e.hidePopover,i=(0,f.y)(),t=i.areHighlightsHidden,a=i.toggleHideHighlights,d=(0,l.useState)(),r=(0,o.A)(d,2),s=r[0],m=r[1],u=(0,l.useCallback)((function(){a(),n()}),[n,a]);return(0,l.useEffect)((function(){m(navigator.userAgent)}),[]),l.createElement(p.q3,{paddingTopBottom:"6px"},l.createElement(v.N,{onClick:u,rules:h},l.createElement("span",null,t?"Show":"Hide"," highlights"),!(0,y.Gz)(s)&&l.createElement(N.a,{padding:"2px 6px",borderRadius:"4px",border:"neutral.tertiary"},l.createElement(b.kZ,{scale:"XS"},(0,y.cX)(s)?"⌘":"Ctrl"," /"))))}var F=i(70521),C=i(17745),w=i(27721),P=i(1722),A=i(56743),I=i(75599),T=i(39160),D=i(51771),x=function(e){var n=e.post,i=e.hidePopover,t=e.showHideHighlights,a=(0,w.R)().value,o=null==a?void 0:a.id,d=(0,P.h)(n).viewerEdge,r=(0,I.w)(),s=l.useCallback((function(e){return r((0,A.K7)(e))}),[r]),m=(0,T.Dy)((function(e){return e.multiVote.clapsPerPost})),u=(0,D.F)(m,n,d),c=u.clapCount,k=u.viewerClapCount,N=(0,C.f)(),S=o&&c&&k&&k>0;return S||t?l.createElement(l.Fragment,null,!!S&&l.createElement(p.q3,null,l.createElement(v.N,{onClick:function(){N(n,(null==a?void 0:a.id)||"",-k,d),s({postId:n.id,clapCount:c-k,viewerClapCount:0,viewerHasClappedSinceFetch:!0}),i()}},"Undo claps")),l.createElement(p.eS,null)):null},_=i(23496),O=i(44929),V=i(49534),R=i(58285),M=i(9942),B=i(4369),L=i(5249),j=i(71468),H=i(91830),U={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"PostAllowResponsesMutation"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"targetPostId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"allowResponses"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Boolean"}}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"setPostAllowResponses"},arguments:[{kind:"Argument",name:{kind:"Name",value:"targetPostId"},value:{kind:"Variable",name:{kind:"Name",value:"targetPostId"}}},{kind:"Argument",name:{kind:"Name",value:"allowResponses"},value:{kind:"Variable",name:{kind:"Name",value:"allowResponses"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"allowResponses"}}]}}]}}]},W=(0,j.Ng)()((function(e){var n=e.children,i=e.dispatch,t=e.onCompleted,a=e.targetPostId;return l.createElement(L.s,{mutation:U,onCompleted:function(){i((0,H.MZ)({message:"Responses are now hidden for this post."})),t&&t()},variables:{targetPostId:a,allowResponses:!1},optimisticResponse:{__typename:"Mutation",setPostAllowResponses:{__typename:"Post",id:a,allowResponses:!1}}},(function(e){return l.createElement(l.Fragment,null,n({mutate:e}))}))})),z=(0,j.Ng)()((function(e){var n=e.children,i=e.dispatch,t=e.onCompleted,a=e.targetPostId;return l.createElement(L.s,{mutation:U,onCompleted:function(){i((0,H.MZ)({message:"Responses are now shown for this post."})),t&&t()},variables:{targetPostId:a,allowResponses:!0},optimisticResponse:{__typename:"Mutation",setPostAllowResponses:{__typename:"Post",id:a,allowResponses:!0}}},(function(e){return l.createElement(l.Fragment,null,n({mutate:e}))}))})),Z=i(22036),q=i(60603),G=function(e){var n=e.hidePopover,i=e.postId,t=e.allowResponses,a=(0,q.e)(!1),d=(0,o.A)(a,3),r=d[0],s=d[1],m=d[2],u=function(){m(),n()};return l.createElement(l.Fragment,null,l.createElement(W,{targetPostId:i},(function(e){var n=e.mutate;return l.createElement(Z.n,{onConfirm:n,isVisible:r,hide:u,entityTypename:"Post"})})),l.createElement(z,{targetPostId:i},(function(e){var n=e.mutate;return l.createElement(p.q3,null,l.createElement(v.N,{onClick:function(){t?s():n()}},t?"Hide responses":"Show responses"))})))},$=i(65364),K=i(28899),Y={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"CollectionSubmissionPopoverQuery"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"viewer"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"writerCollections"},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"CollectionSubmissionOption_collection"}}]}},{kind:"Field",name:{kind:"Name",value:"adminCollections"},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"CollectionSubmissionOption_collection"}}]}}]}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"collectionUrl_collection"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Collection"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"domain"}},{kind:"Field",name:{kind:"Name",value:"slug"}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"CollectionAvatar_collection"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Collection"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"name"}},{kind:"Field",name:{kind:"Name",value:"avatar"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}}]}},{kind:"FragmentSpread",name:{kind:"Name",value:"collectionUrl_collection"}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"CollectionSubmissionOption_collection"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Collection"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"name"}},{kind:"Field",name:{kind:"Name",value:"slug"}},{kind:"FragmentSpread",name:{kind:"Name",value:"CollectionAvatar_collection"}}]}}]},J=i(95420),Q=i(42976),X={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"ManageCollectionPostStatusMutation"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"postId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"collectionSlug"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"status"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"CollectionPostStatus"}}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"manageCollectionPostStatus"},arguments:[{kind:"Argument",name:{kind:"Name",value:"postId"},value:{kind:"Variable",name:{kind:"Name",value:"postId"}}},{kind:"Argument",name:{kind:"Name",value:"collectionSlug"},value:{kind:"Variable",name:{kind:"Name",value:"collectionSlug"}}},{kind:"Argument",name:{kind:"Name",value:"status"},value:{kind:"Variable",name:{kind:"Name",value:"status"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"statusForCollection"}},{kind:"Field",name:{kind:"Name",value:"pendingCollection"},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"ManageCollectionPostStatus_collection"}}]}}]}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"ManageCollectionPostStatus_collection"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Collection"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"slug"}}]}}]},ee={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"RejectPostFromPubMutation"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"postId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"collectionSlug"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"status"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"CollectionPostStatus"}}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"manageCollectionPostStatus"},arguments:[{kind:"Argument",name:{kind:"Name",value:"postId"},value:{kind:"Variable",name:{kind:"Name",value:"postId"}}},{kind:"Argument",name:{kind:"Name",value:"collectionSlug"},value:{kind:"Variable",name:{kind:"Name",value:"collectionSlug"}}},{kind:"Argument",name:{kind:"Name",value:"status"},value:{kind:"Variable",name:{kind:"Name",value:"status"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"statusForCollection"}},{kind:"Field",name:{kind:"Name",value:"collection"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}}]}},{kind:"Field",name:{kind:"Name",value:"pendingCollection"},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"ManageCollectionPostStatus_collection"}}]}}]}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"ManageCollectionPostStatus_collection"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Collection"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"slug"}}]}}]},ne=function(e){var n=(0,J.n)(X),i=(0,o.A)(n,1)[0];return(0,l.useCallback)((function(n){return i({variables:{collectionSlug:(null==n?void 0:n.slug)||"",postId:e.id,status:Q.d6.APPROVED}})}),[e])},ie=function(e){var n=(0,J.n)(ee),i=(0,o.A)(n,1)[0];return(0,l.useCallback)((function(n){return i({variables:{collectionSlug:(null==n?void 0:n.slug)||"",postId:e.id,status:Q.d6.REMOVED},optimisticResponse:{manageCollectionPostStatus:{__typename:"Post",id:e.id,statusForCollection:null,collection:null,pendingCollection:null}}}).then((function(e){if(e.errors&&e.errors[0])throw e.errors[0];return e}))}),[e])},te=i(52764),ae=i(3005),le=i(99731),oe=i(85864),de=i(24960),re=i(53908),se=i(56942),me=i(27622),ue=i(66305),ce="collectionSubmissionPopover",ke=[{name:"",value:"No publication",content:l.createElement(N.a,{height:"32px",display:"flex",alignItems:"center",marginLeft:"5px"},l.createElement(b.kZ,{scale:"M",color:"DARKER"},"No publication"))}];function pe(e){var n=e.collection;return n.name?l.createElement(N.a,{display:"flex",justifyContent:"space-between",width:"200px",alignItems:"center",marginLeft:"5px"},l.createElement(b.kZ,{scale:"M",color:"DARKER"},n.name),l.createElement(K.u,{collection:n,size:32})):null}function ve(e){var n=e.show,i=e.post,t=i.statusForCollection,a=i.isPublished,d=l.useState(!1),r=(0,o.A)(d,2),s=r[0],m=r[1];return s||ue.R5.on("load",(function(){return m(!0)})),!t&&a&&s?l.createElement(Se,{post:i,noQueryReturn:null},(function(e){var t=e.loading,a=e.error,o=e.data;if(t||a)return null;var d=(void 0===o?{viewer:void 0}:o).viewer,r=i.creator;if(!d||!r||d.id!==r.id)return null;var s=d.adminCollections,m=d.writerCollections;return 0===s.length&&0===m.length?null:l.createElement(p.q3,null,l.createElement(v.N,{"aria-controls":ce,"aria-expanded":"false",onClick:n},"Add to publication"))})):null}function Ne(e){var n=e.isVisible,i=e.hide;return l.createElement(ae.l,{isVisible:n,hide:i,withCloseButton:!0},l.createElement(N.a,{display:"flex",flexDirection:"column",alignItems:"center",textAlign:"center",maxWidth:"480px"},l.createElement(se.DZ,{scale:"M",tag:"h3"},"Story submitted"),l.createElement(N.a,{paddingTop:"8px",paddingBottom:"24px"},l.createElement(me.Pd,{scale:"M"},"We’ll email you when the publication editor has reviewed your submission.")),l.createElement(le.$n,{buttonStyle:"OBVIOUS",onClick:i},"OK")))}var Se=function(e){var n=e.children,i=e.post,t=e.noQueryReturn,a=i.creator;return a?l.createElement(te.c,null,(function(e){return e?e.id!==a.id?l.createElement(l.Fragment,null,t):l.createElement($.X,{query:Y,ssr:!1},(function(e){var i=e.loading,t=e.error,a=e.data;return l.createElement(l.Fragment,null,n({loading:i,error:t,data:a}))})):l.createElement(l.Fragment,null,t)})):l.createElement(l.Fragment,null,t)},ge=function(e){var n=e.post,i=e.hide,t=e.isVisible,a=e.children,d=l.useState(!1),r=(0,o.A)(d,2),s=r[0],m=r[1],u=l.useState(""),c=(0,o.A)(u,2),k=c[0],p=c[1],S=ne(n),g=function(e){var n=(0,J.n)(X),i=(0,o.A)(n,1)[0];return(0,l.useCallback)((function(n){return i({variables:{collectionSlug:(null==n?void 0:n.slug)||"",postId:e.id,status:Q.d6.PENDING},optimisticResponse:{manageCollectionPostStatus:{__typename:"Post",id:e.id,statusForCollection:Q.d6.PENDING,pendingCollection:n}}})}),[e])}(n);return s||ue.R5.on("load",(function(){return m(!0)})),n.isPublished&&s?l.createElement(oe.B,null,(function(e){var o=e.isVisible,d=e.hide,r=e.show;return l.createElement(l.Fragment,null,l.createElement(Ne,{hide:d,isVisible:o}),l.createElement(Se,{post:n,noQueryReturn:a},(function(e){var o=e.loading,d=e.error,s=e.data,m=void 0===s?{viewer:void 0}:s;if(o||d)return l.createElement(l.Fragment,null,a);var u=m.viewer,c=n.creator;if(!u||!c||u.id!==c.id)return l.createElement(l.Fragment,null,a);var f=u.adminCollections,y=u.writerCollections;if(0===f.length&&0===y.length)return l.createElement(l.Fragment,null,a);var h=f.concat(y).filter((function(e){return!!e&&!!e.slug&&!!e.name})).map((function(e){return{name:e.slug||"",value:e.name||"",content:l.createElement(pe,{collection:e})}})),E=ke.concat(h),F=f.reduce((function(e,n){return e[n.slug||""]=n,e}),{}),C=y.reduce((function(e,n){return e[n.slug||""]=n,e}),{}),w="";if(k){var P=E.find((function(e){return e.name===k}));P&&(w=P.value)}var A="addStoryToPublicationTitle";return l.createElement(de.A,{ariaId:ce,hide:i,isVisible:t,popoverRenderFn:function(){return l.createElement(N.a,{padding:"20px",width:"280px",display:"flex",flexDirection:"column"},l.createElement(b.kZ,{scale:"M",color:"DARKER",labelledById:A},"Add your story to a publication:"),l.createElement(N.a,{marginTop:"10px",position:"relative"},l.createElement(N.a,{position:"absolute",height:"16px",width:"100%",bottom:"0",zIndex:"100",backgroundImage:"linear-gradient(transparent, #ffffff)"}),l.createElement(N.a,{maxHeight:"160px",overflow:"auto"},l.createElement(re.z,{value:w,onChange:p,options:E,radioButtonsName:"addStory","aria-labelledby":A}))),l.createElement(N.a,{display:"flex",marginTop:"20px"},k in F?l.createElement(le.$n,{onClick:function(){var e=F[k];i(),S(e).then((function(){window.location.reload()}))},buttonStyle:"OBVIOUS"},"Add story"):l.createElement(le.$n,{onClick:function(){var e=C[k];g(e),i(),r()},disabled:!k},"Submit"),l.createElement(N.a,{marginLeft:"10px"},l.createElement(b.kZ,{scale:"M",color:"LIGHTER"},l.createElement(v.N,{onClick:i},l.createElement(N.a,{padding:"10px"},"Cancel"))))),l.createElement(N.a,{marginTop:"10px"},l.createElement(b.kZ,{scale:"M"},"This story will be automatically submitted to the publication. When you submit your story, the publication's editors will be notified and will be able to edit your story.")))}},a)})))})):l.createElement(l.Fragment,null,a)},fe=function(e){var n=e.children,i=e.isVisible,t=e.post,a=e.hide,o=ne(t),d=ie(t),r=(0,I.w)(),s=t.pendingCollection;return s?l.createElement(de.A,{ariaId:"manageSubmissionPopover",isVisible:i,hide:a,popoverRenderFn:function(){return l.createElement(N.a,{padding:"16px",maxWidth:"280px"},l.createElement(N.a,{display:"flex",flexDirection:"row",alignItems:"center"},l.createElement(N.a,{paddingRight:"8px"},l.createElement(K.u,{collection:s,size:40})),l.createElement(b.kZ,{scale:"S"},"This draft is submitted to ",s.name,".")),l.createElement(N.a,{flexDirection:"row",display:"flex",paddingTop:"16px"},l.createElement(N.a,{paddingRight:"8px"},l.createElement(le.$n,{buttonStyle:"OBVIOUS",onClick:function(){a(),o(t.pendingCollection).then((function(){window.location.reload()}))}},"Accept")),l.createElement(le.$n,{buttonStyle:"SUBTLE",onClick:function(){d(t.pendingCollection).then((function(){r((0,H.MZ)({message:"Story removed from ".concat(s.name||"publication")}))})),a()}},"Don't accept")))}},n):l.createElement(l.Fragment,null,n)},be=function(e,n){return n&&e.creator&&n.id===e.creator.id},ye=i(86329),he="removeFromPublicationPopover",Ee=function(e){var n,i,t=e.viewer,a=e.show,o=e.post,d=(0,ye.J)((null===(n=o.pendingCollection)||void 0===n?void 0:n.id)||(null===(i=o.collection)||void 0===i?void 0:i.id)).viewerEdge,r=null==d?void 0:d.isEditor;return t&&("APPROVED"===o.statusForCollection&&(r||function(e,n){var i=e.pendingCollection||e.collection;return i&&i.creator&&n.id===i.creator.id}(o,t)||be(o,t))||"PENDING"===o.statusForCollection&&be(o,t))?l.createElement(p.q3,null,l.createElement(v.N,{"aria-controls":he,"aria-expanded":"false",onClick:a},"Remove story from publication")):null},Fe=function(e){var n=e.children,i=e.isVisible,t=e.hide,a=e.post,o=e.viewer,d=(0,I.w)(),r=ie(a),s=a.collection||a.pendingCollection;return s?l.createElement(de.A,{ariaId:he,isVisible:i,hide:t,popoverRenderFn:function(){return l.createElement(N.a,{padding:"16px",maxWidth:"280px"},l.createElement(N.a,{display:"flex",flexDirection:"row",alignItems:"center"},l.createElement(N.a,{paddingRight:"8px"},l.createElement(K.u,{collection:s,size:40})),"APPROVED"===a.statusForCollection?l.createElement(b.kZ,{scale:"S"},be(a,o)?"Your":"This"," story is published in"," ",s.name,"."):"PENDING"===a.statusForCollection?l.createElement(b.kZ,{scale:"S"},"Your story is being reviewed by ",s.name," editors."):l.createElement(b.kZ,{scale:"S"},"This draft is submitted to ",s.name)),l.createElement(N.a,{flexDirection:"row",display:"flex",paddingTop:"16px"},l.createElement(N.a,{paddingRight:"8px"},l.createElement(le.$n,{buttonStyle:"SUBTLE",onClick:function(){r(s).then((function(){d((0,H.MZ)({message:"Story removed from ".concat(s.name||"publication")}))}),(function(){d((0,H.MZ)({message:"There was a problem removing the story from ".concat(s.name||"publication"),toastStyle:"ERROR"}))})),t()}},"PENDING"===a.statusForCollection?"Cancel submission":"Remove from ".concat(s.name||"")))))}},n):l.createElement(l.Fragment,null,n)},Ce=i(38714),we=i(89142),Pe=i(32038),Ae=i(30707),Ie=i(43634),Te=i(59348),De=i(88308),xe=i(21335),_e=i(71984),Oe=i(17045),Ve=function(e){var n=e.hidePopover,i=e.targetUserId,t=e.postId,a=e.viewerId,d=(0,xe.cd)(i).viewerEdge,r=!(null==d||!d.isBlocking),s=(0,q.e)(!1),m=(0,o.A)(s,3),u=m[0],c=m[1],k=m[2],N=(0,l.useCallback)((function(){k(),n()}),[n,k]),S=(0,Oe.M)({viewerId:a,targetAuthorId:i,targetPostId:t,onOptimisticComplete:N});return l.createElement(l.Fragment,null,l.createElement(_e.e,{onSubmit:S,isVisible:u,hide:N,type:"story",alreadyBlocking:r}),l.createElement(p.q3,null,l.createElement(v.N,{onClick:c,color:"RED"},"Report story...")))},Re=i(46445),Me=i(51260),Be=function(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];return function(){for(var e=0,i=n;e<i.length;e++)(0,i[e])()}},Le=i(46879),je={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"CreatorActionOverflowPopoverQuery"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"postId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"post"},arguments:[{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"postId"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"CreatorActionOverflowPopover_post"}}]}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"MutePopoverOptions_creator"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"User"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"auroraHooks_publisher"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Publisher"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Collection"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"isAuroraEligible"}},{kind:"Field",name:{kind:"Name",value:"isAuroraVisible"}},{kind:"Field",name:{kind:"Name",value:"viewerEdge"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"isEditor"}}]}}]}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"User"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"isAuroraVisible"}}]}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"MutePopoverOptions_collection"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Collection"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"useIsPinnedInContext_post"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Post"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"collection"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}}]}},{kind:"Field",name:{kind:"Name",value:"pendingCollection"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}}]}},{kind:"Field",name:{kind:"Name",value:"pinnedAt"}},{kind:"Field",name:{kind:"Name",value:"pinnedByCreatorAt"}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"NewsletterV3EmailToSubscribersMenuItem_post"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Post"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"creator"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"newsletterV3"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"subscribersCount"}}]}}]}},{kind:"Field",name:{kind:"Name",value:"isNewsletter"}},{kind:"Field",name:{kind:"Name",value:"isAuthorNewsletter"}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"MultiVoteCount_post"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Post"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"ClapMutation_post"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Post"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"clapCount"}},{kind:"FragmentSpread",name:{kind:"Name",value:"MultiVoteCount_post"}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"OverflowMenuItemUndoClaps_post"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Post"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"clapCount"}},{kind:"FragmentSpread",name:{kind:"Name",value:"ClapMutation_post"}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"SusiModal_post"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Post"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"creator"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}}]}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"SusiClickable_post"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Post"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"mediumUrl"}},{kind:"FragmentSpread",name:{kind:"Name",value:"SusiModal_post"}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"AddToCatalogBase_post"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Post"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"isPublished"}},{kind:"FragmentSpread",name:{kind:"Name",value:"SusiClickable_post"}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"useFeatureStoryInPub_post"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Post"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"collection"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"slug"}},{kind:"Field",name:{kind:"Name",value:"name"}}]}},{kind:"Field",name:{kind:"Name",value:"publicationsFeaturingPost"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}}]}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"useIsVerifiedBookAuthor_user"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"User"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"verifications"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"isBookAuthor"}}]}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"collectionUrl_collection"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Collection"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"domain"}},{kind:"Field",name:{kind:"Name",value:"slug"}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"CollectionAvatar_collection"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Collection"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"name"}},{kind:"Field",name:{kind:"Name",value:"avatar"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}}]}},{kind:"FragmentSpread",name:{kind:"Name",value:"collectionUrl_collection"}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"PostPreview_post"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Post"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"title"}},{kind:"Field",name:{kind:"Name",value:"creator"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"name"}},{kind:"Field",name:{kind:"Name",value:"username"}},{kind:"FragmentSpread",name:{kind:"Name",value:"useIsVerifiedBookAuthor_user"}}]}},{kind:"Field",name:{kind:"Name",value:"collection"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"name"}},{kind:"Field",name:{kind:"Name",value:"slug"}},{kind:"FragmentSpread",name:{kind:"Name",value:"CollectionAvatar_collection"}}]}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"FeatureStoryModal_post"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Post"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"collection"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"name"}},{kind:"Field",name:{kind:"Name",value:"slug"}}]}},{kind:"FragmentSpread",name:{kind:"Name",value:"useFeatureStoryInPub_post"}},{kind:"FragmentSpread",name:{kind:"Name",value:"PostPreview_post"}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"FeatureStoryMenuItem_post"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Post"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"FragmentSpread",name:{kind:"Name",value:"useFeatureStoryInPub_post"}},{kind:"FragmentSpread",name:{kind:"Name",value:"FeatureStoryModal_post"}},{kind:"FragmentSpread",name:{kind:"Name",value:"PostPreview_post"}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"CreatorActionOverflowPopover_post"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Post"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"allowResponses"}},{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"statusForCollection"}},{kind:"Field",name:{kind:"Name",value:"isLocked"}},{kind:"Field",name:{kind:"Name",value:"isPublished"}},{kind:"Field",name:{kind:"Name",value:"clapCount"}},{kind:"Field",name:{kind:"Name",value:"pinnedAt"}},{kind:"Field",name:{kind:"Name",value:"pinnedByCreatorAt"}},{kind:"Field",name:{kind:"Name",value:"curationEligibleAt"}},{kind:"Field",name:{kind:"Name",value:"responseDistribution"}},{kind:"Field",name:{kind:"Name",value:"inResponseToPostResult"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"Field",name:{kind:"Name",value:"inResponseToCatalogResult"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"Field",name:{kind:"Name",value:"pendingCollection"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"name"}},{kind:"Field",name:{kind:"Name",value:"creator"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}}]}},{kind:"Field",name:{kind:"Name",value:"avatar"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}}]}},{kind:"Field",name:{kind:"Name",value:"domain"}},{kind:"Field",name:{kind:"Name",value:"slug"}}]}},{kind:"Field",name:{kind:"Name",value:"creator"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"FragmentSpread",name:{kind:"Name",value:"MutePopoverOptions_creator"}},{kind:"FragmentSpread",name:{kind:"Name",value:"auroraHooks_publisher"}}]}},{kind:"Field",name:{kind:"Name",value:"collection"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"name"}},{kind:"Field",name:{kind:"Name",value:"creator"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}}]}},{kind:"Field",name:{kind:"Name",value:"avatar"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}}]}},{kind:"Field",name:{kind:"Name",value:"domain"}},{kind:"Field",name:{kind:"Name",value:"slug"}},{kind:"FragmentSpread",name:{kind:"Name",value:"MutePopoverOptions_collection"}},{kind:"FragmentSpread",name:{kind:"Name",value:"auroraHooks_publisher"}}]}},{kind:"Field",name:{kind:"Name",value:"publicationsFeaturingPost"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}}]}},{kind:"FragmentSpread",name:{kind:"Name",value:"useIsPinnedInContext_post"}},{kind:"FragmentSpread",name:{kind:"Name",value:"NewsletterV3EmailToSubscribersMenuItem_post"}},{kind:"FragmentSpread",name:{kind:"Name",value:"OverflowMenuItemUndoClaps_post"}},{kind:"FragmentSpread",name:{kind:"Name",value:"AddToCatalogBase_post"}},{kind:"FragmentSpread",name:{kind:"Name",value:"FeatureStoryMenuItem_post"}}]}}]};function He(e,n){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),i.push.apply(i,t)}return i}function Ue(e){for(var n=1;n<arguments.length;n++){var i=null!=arguments[n]?arguments[n]:{};n%2?He(Object(i),!0).forEach((function(n){(0,d.A)(e,n,i[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):He(Object(i)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(i,n))}))}return e}var We,ze=function(e){var n=(0,m.IT)(je,{variables:{postId:e.post.id}}).data;if(null==n||!n.post)return null;var i=Ue(Ue({},e),{},{post:n.post});return l.createElement(Ze,i)},Ze=function(e){var n,i,a,d=e.post,r=e.hideUndoApplause,m=void 0!==r&&r,S=e.isResponsive,f=e.popoverPositioningStrategy,b=e.hideOnScroll,y=e.testId,h=e.prependMenuItems,C=e.rules,P=e.showAddToList,A=e.showHideHighlights,I=e.onButtonClick,D=d.creator,L=d.collection,j=(0,u.Zp)(),U=(0,Me.om)()("ShowWriterOutbox",{}),W=(0,l.useState)(!1),z=(0,o.A)(W,2),Z=z[0],$=z[1],K=(0,l.useState)(!1),Y=(0,o.A)(K,2),J=Y[0],X=Y[1],ee=(0,l.useState)(!1),ne=(0,o.A)(ee,2),ie=ne[0],te=ne[1],ae=d.allowResponses,le=(0,ye.J)(null==L?void 0:L.id).viewerEdge,oe=(0,H.zF)(),re=(0,w.R)().value,se=null==re?void 0:re.id,me=d.responseDistribution===Q.IZ.DISTRIBUTED,ue=!!d.inResponseToPostResult||!!d.inResponseToCatalogResult,ce=ue?"response":"story",ke=(0,we.L)(d),pe=(0,o.A)(ke,2),Ne=pe[0],Se=pe[1],be=(0,Ce.M)(d.collection),he=(0,Ce.M)(d.creator),xe=(0,l.useCallback)((function(e){var n,i,t;oe({extraParams:{collectionName:(null===(n=d.collection)||void 0===n?void 0:n.name)||"",becamePinned:!(null===(i=e.data)||void 0===i||null===(t=i.setPinnedAt)||void 0===t||!t.pinnedAt)},toastStyle:"POST_PINNED_TO_COLLECTION_HOMEPAGE"})}),[null===(n=d.collection)||void 0===n?void 0:n.name]),_e=(0,l.useCallback)((function(e,n){var i;"MutationSuccess"===(null===(i=e.data)||void 0===i?void 0:i.setPostPinnedOnCreatorProfile.__typename)&&oe({message:"This ".concat(ce,n?" has been unpinned from your profile's homepage":" has been pinned to your profile's homepage")})}),[]),Oe=(0,l.useCallback)((function(){Se().then(xe)}),[Se,xe,null==d||null===(i=d.collection)||void 0===i?void 0:i.name]),je=(0,we.m)(d),He=(0,o.A)(je,2),Ue=He[0],We=He[1],ze=(0,l.useCallback)((function(){We().then((function(e){return _e(e,Ue)}))}),[We,_e]),Ze=(0,T.d4)((function(e){return e.config.authDomain})),qe=(0,l.useState)(!1),Ge=(0,o.A)(qe,2),$e=Ge[0],Ke=Ge[1],Ye=(0,q.e)(!1),Je=(0,o.A)(Ye,3),Qe=Je[0],Xe=Je[1],en=Je[2],nn=(0,q.e)(!1),tn=(0,o.A)(nn,4),an=tn[0],ln=tn[2],on=tn[3],dn=(0,V.Q)(d.id),rn=(0,o.A)(dn,1)[0],sn=(0,q.e)(!1),mn=(0,o.A)(sn,3),un=mn[0],cn=mn[1],kn=mn[2],pn=(0,l.useCallback)((function(){Z?$(!1):J?X(!1):on(),null==I||I()}),[Z,J,on,I]),vn=(0,Me.Nw)("ShowHome",{}),Nn=(0,l.useCallback)((function(){rn().then((function(){window.location.assign(vn)}))}),[rn,vn]),Sn="Delete story";me?Sn="Delete story and response":ue&&(Sn="Delete response");var gn=me?Pe.e:l.createElement(c.C,{entityName:ce}),fn=(0,Ae._P)("can_edit_members_only_posts"),bn=!!(0,Ae._P)("enable_submissions_v2");if(!D||!re)return null;var yn=se===D.id,hn=null==le?void 0:le.isEditor,En=yn||hn,Fn=fn&&d&&d.isLocked,Cn=En||Fn,wn="creatorActionOverflowMenu",Pn=hn&&!yn,An=!ue||me,In=L&&hn&&d.isPublished,Tn=null==d?void 0:d.publicationsFeaturingPost.map((function(e){return e.id})),Dn=null!==(a=L&&Tn.includes(L.id))&&void 0!==a&&a,xn=function(){return{maxWidth:"280px"}},_n=function(){me&&(ln(),Xe())};if($e)return l.createElement(M.r,{to:(0,Le.ycK)(Ze,d.id)});var On={kind:Q.Bd.POST,target:d};return l.createElement(l.Fragment,null,l.createElement(Re.T,{buttonStyle:"STRONG",cancelText:"Cancel",isVisible:Qe,onConfirm:function(){Ke(!0)},hide:en,titleText:"Edit story and response",confirmText:"Continue",isDestructiveAction:!1},Pe.T),l.createElement(Re.T,{buttonStyle:"ERROR",cancelText:"Cancel",isVisible:un,onConfirm:Nn,hide:kn,titleText:Sn,confirmText:"Delete",isDestructiveAction:!0,testId:"deleteStoryModal"},gn),l.createElement(_.f,(0,t.A)({},On,{viewer:re}),(function(e){var n=e.onClick,i=e.bookmarkIcon;return l.createElement(de.A,{popoverRules:xn,targetDistance:10,ariaId:wn,isVisible:an,hide:ln,positioningStrategy:f,hideOnScroll:b,popoverRenderFn:function(){return l.createElement(p.Ni,null,h&&l.createElement(l.Fragment,null,h(ln)),P&&l.createElement(g,{showAt:P,onClick:n,hidePopover:ln,bookmarkIcon:i}),l.createElement(l.Fragment,null,l.createElement(O.D,{type:"popover",handleClick:_n,href:(0,Le.ycK)(Ze,d.id),isVisible:!!Cn},"Edit ",ce),In&&l.createElement(k.k,{post:d,hidePopover:ln,isFeaturedInCurrentPublication:Dn,showCollectionName:!0,showNewLabelOrTokenCount:!0}),L&&hn&&be&&An&&l.createElement(p.q3,null,l.createElement(v.N,{onClick:Oe,rules:{textAlign:"left"}},Ne?"Unpin this ".concat(ce," from "):"Pin this ".concat(ce," to "),L.name)),yn&&he&&An&&l.createElement(p.q3,null,l.createElement(v.N,{onClick:ze},Ue?"Unpin this ".concat(ce," from your profile"):"Pin this ".concat(ce," to your profile"))),l.createElement(B.z,{post:d,onClick:ln,menuStyle:"TEXT"}),l.createElement(p.eS,null),l.createElement(p.q3,null,l.createElement(v.N,{href:(0,Le.vEY)(Ze,d.id)},s()(ce)," settings")),l.createElement(p.q3,null,l.createElement(v.N,{href:(0,Le.doj)(Ze,d.id)},s()(ce)," stats")),l.createElement(p.eS,null),A&&l.createElement(E,{hidePopover:ln}),l.createElement(G,{hidePopover:ln,postId:d.id,allowResponses:ae}),l.createElement(ve,{post:d,show:function(){if(bn)return j("".concat(U,"?postId=").concat(d.id));X(!0),ln()}}),l.createElement(Ee,{viewer:re,post:d,show:function(){te(!0),ln()}}),yn&&l.createElement(p.q3,null,l.createElement(v.N,{onClick:Be(ln,cn),color:"RED"},"Delete ",ce)),Pn?l.createElement(l.Fragment,null,l.createElement(p.eS,null),!m&&l.createElement(x,{post:d,hidePopover:ln}),l.createElement(l.Fragment,null,se?l.createElement(Ve,{targetUserId:D.id,postId:d.id,hidePopover:ln,viewerId:se}):l.createElement(p.q3,null,l.createElement(Ie.r,{operation:"register",post:d,susiEntry:"report_footer"},"Report this ",ce))),l.createElement(R.J,{hidePopover:ln,creator:D,collection:L,postId:d.id}),l.createElement(Te.U,{hidePopover:ln,creator:D,viewer:re}),l.createElement(De.U,{hidePopover:ln,creator:D,viewer:re})):null))}},l.createElement(ge,{post:d,isVisible:J,hide:function(){X(!1)}},l.createElement(Fe,{viewer:re,post:d,isVisible:ie,hide:function(){te(!1)}},l.createElement(fe,{post:d,isVisible:Z,hide:function(){$(!1)}},l.createElement(N.a,{flexGrow:"0",marginRight:"-4px"},l.createElement(F.Z,{ariaControls:wn,ariaExpanded:an?"true":"false",ariaLabel:"More options",onClick:function(){return pn()},isResponsive:S,tooltipText:"More",testId:y,rules:C}))))))})))},qe=i(49470);function Ge(){return Ge=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var i=arguments[n];for(var t in i)({}).hasOwnProperty.call(i,t)&&(e[t]=i[t])}return e},Ge.apply(null,arguments)}const $e=function(e){return l.createElement("svg",Ge({xmlns:"http://www.w3.org/2000/svg",width:24,height:24,fill:"none",viewBox:"0 0 24 24"},e),We||(We=l.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M22 12c0 5.523-4.477 10-10 10S2 17.523 2 12 6.477 2 12 2s10 4.477 10 10m-13.75-.5a.5.5 0 0 0 0 1h7.5a.5.5 0 0 0 0-1z",clipRule:"evenodd"})))};var Ke=i(43849),Ye=i(8963),Je=i(34507),Qe={pointerEvents:"none"};function Xe(e){var n=e.hidePopover,i=e.post,t=(0,q.e)(!1),a=(0,o.A)(t,3),d=a[0],r=a[1],s=a[2],m=(0,Je.K)(i.id),u=m.loading,c=m.showLess,k=m.explicitSignal,S=m.undo,g=m.showUndoToast,f=(0,Ke.$)(),b=f.animateShowLess,y=f.animateUndo,h=k===Q.WN.SHOW_LESS,E=(0,l.useCallback)((function(){h?(S(),g(Q.WN.SHOW_LESS),n(),null==y||y()):(c(),b?(n(),b()):r())}),[c,n,h,S,g,b,y]),F=(0,l.useCallback)((function(){n(),s()}),[n,s]);return l.createElement(l.Fragment,null,l.createElement(p.q3,{loading:u},l.createElement(v.N,{onClick:E,disabled:u,rules:u?Qe:void 0},l.createElement(N.a,{display:"flex"},l.createElement(N.a,{marginRight:"12px",flexShrink:"0"},h?l.createElement($e,null):l.createElement(qe.A,null)),l.createElement(N.a,{display:"flex",flexDirection:"column",marginTop:"2px",gap:"4px",textAlign:"left"},h?"Undo show":"Show"," less like this")))),l.createElement(p.eS,null),l.createElement(Ye.b,{isVisible:d,hide:F,post:i}))}var en=i(20822),nn=i(49287),tn=i(52705);function an(e){var n=e.author,i=e.collection,t=e.hidePopover,a=(0,ye.J)(null==i?void 0:i.id).viewerEdge,o=(null==n?void 0:n.id)||"",d=(null==i?void 0:i.id)||"",r=null==a?void 0:a.isFollowing,s=(0,en.H)({collectionId:d,collectionName:null==i?void 0:i.name}),m=s.followCollection,u=s.unfollowCollection,c=(0,nn.jI)(),k=(0,w.R)().value,N=k&&o===k.id,S=(0,l.useCallback)((function(){r?u():m(),null==t||t()}),[d,r,m,t,c,u]);return k?l.createElement(l.Fragment,null,!!n&&!N&&l.createElement(p.q3,null,l.createElement(tn.N,{scale:"S",susiEntry:"follow_post_preview_menu",user:n,isInline:!0,preventParentClick:!0,showSubscribeDialog:!0})),!!i&&!(null!=a&&a.isEditor)&&l.createElement(p.q3,null,l.createElement(v.N,{onClick:S},r?"Unfollow":"Follow"," publication"))):null}function ln(e){var n=e.post,i=e.isResponsive,a=e.popoverPositioningStrategy,d=e.viewer,r=e.hideOnScroll,s=e.testId,m=e.prependMenuItems,u=e.rules,c=e.showAddToList,k=e.showHideHighlights,v=e.onButtonClick,N=n.id,S=n.creator,f=n.collection,b=(0,q.e)(!1),y=(0,o.A)(b,4),h=y[0],C=y[2],w=y[3],P=(0,l.useCallback)((function(){null==v||v(),w()}),[w,v]),A={kind:Q.Bd.POST,target:n},I=(0,l.useCallback)((function(e,i){return l.createElement(p.Ni,{width:"248px"},m&&l.createElement(l.Fragment,null,m(C)),c&&l.createElement(g,{showAt:c,onClick:e,hidePopover:C,bookmarkIcon:i}),l.createElement(Xe,{hidePopover:C,post:n}),k&&l.createElement(E,{hidePopover:C}),l.createElement(x,{post:n,hidePopover:C,showHideHighlights:k}),l.createElement(an,{author:S,collection:f,hidePopover:C}),l.createElement(p.eS,null),l.createElement(R.J,{creator:S,collection:f,hidePopover:C,postId:N}),l.createElement(Ve,{postId:N,viewerId:null==d?void 0:d.id,targetUserId:(null==S?void 0:S.id)||"",hidePopover:C}))}),[m,c]);return null!=S&&S.id?l.createElement(_.f,(0,t.A)({},A,{viewer:d}),(function(e){var n=e.onClick,t=e.bookmarkIcon;return l.createElement(de.A,{isVisible:h,positioningStrategy:a,targetDistance:10,hide:C,popoverRenderFn:function(){return I(n,t)},hideOnScroll:r},l.createElement(F.Z,{onClick:P,ariaLabel:"More options",isResponsive:i,tooltipText:"More",testId:s,rules:u}))})):null}var on=["showAddToList"];function dn(e){var n=e.showAddToList,i=(0,a.A)(e,on),o=i.post,d=o.creator,r=o.collection,s=o.visibility,m=(0,w.R)(),u=m.loading,c=m.value,k=(0,ye.J)(null==r?void 0:r.id).viewerEdge,p=!u&&!!c,v=!(null==k||!k.isEditor),N=(null==c?void 0:c.id)===(null==d?void 0:d.id),S=s===Q.dL.UNLISTED?void 0:n;return d&&p?v||N?l.createElement(ze,(0,t.A)({showAddToList:S},i)):l.createElement(ln,(0,t.A)({viewer:c,showAddToList:S},i)):null}},44929:(e,n,i)=>{i.d(n,{D:()=>p});var t=i(58168),a=i(80045),l=i(96540),o=i(14782),d=i(86527),r=i(99731),s=i(51260),m=i(65550),u=["size","href","children","handleClick","buttonStyle","type","isVisible"],c=["href","children","handleClick"],k=["handleClick","isVisible","children","href"],p=function(e){var n=e.size,i=e.href,o=e.children,d=e.handleClick,r=e.buttonStyle,c=e.type,k=e.isVisible,p=void 0===k||k,g=(0,a.A)(e,u),f=!(0,m.L)(),b=(0,s.IF)(),y=(0,s.au)(),h=(0,l.useCallback)((function(e){null==d||d(e)}),[d]);if(!p)return null;var E=b(new URL(i).pathname),F=null==E?void 0:E.params.postId,C=i;switch(f||(C=F?y("ShowMobileWebEditorRedirectEditStory",{postId:F}):y("ShowMobileWebEditorRedirectNewStory",{})),c){case"link":return l.createElement(v,(0,t.A)({href:C,handleClick:h},g),o);case"button":return l.createElement(S,{buttonStyle:r,size:n,href:C,handleClick:h},o);case"popover":return l.createElement(N,(0,t.A)({isVisible:p,href:C,handleClick:h},g),o)}},v=function(e){var n=e.href,i=e.children,o=e.handleClick,r=(0,a.A)(e,c);return l.createElement(d.N,(0,t.A)({href:n,onClick:o},r),i)},N=function(e){var n=e.handleClick,i=e.isVisible,d=void 0===i||i,r=e.children,s=e.href,m=(0,a.A)(e,k);return d?l.createElement(o.q3,null,l.createElement(v,(0,t.A)({href:s,handleClick:n},m),r)):null},S=function(e){var n=e.href,i=e.size,t=e.buttonStyle,a=e.children,o=e.handleClick;return l.createElement(r.$n,{buttonStyle:t,size:i,href:n,onClick:o},a)}},66356:(e,n,i)=>{i.d(n,{c:()=>m});var t=i(54499),a=i(43253),l=i(53303),o=i(55127),d=i.n(o),r=i(96540),s=i(91271);function m(e){var n=e.hasPrefix,i=void 0!==n&&n,o=e.timestamp,m=e.testId,u=e.isShorthand,c=e.isSameYearShorthand,k=e.includeMinutesAgo,p=Date.now(),v=(0,t.A)(p,o),N=(0,a.A)(p,o);if(0===N){var S=(0,l.A)(p,o);if(k&&S>0){var g="".concat(S," ").concat(d()("min",S)," ago");return r.createElement(r.Fragment,null,g)}var f=i?"just now":"Just now";return r.createElement(r.Fragment,null,f)}if(N>=1&&N<24){var b=u?"".concat(N,"h ago"):"".concat(N," ").concat(d()("hour",N)," ago");return r.createElement(r.Fragment,null,b)}if(v>=1&&v<7){var y=u?"".concat(v,"d ago"):"".concat(v," ").concat(d()("day",v)," ago");return r.createElement(r.Fragment,null,y)}return(0,s.n9)({timestamp:o,testId:m,isShorthand:u,isSameYearShorthand:c})}},83573:(e,n,i)=>{i.d(n,{s:()=>t});var t={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"UserReportStoryMutation"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"targetPostId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"targetAuthorId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"alsoBlockAuthor"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Boolean"}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"reason"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"reportStoryAndMaybeBlockAuthor"},arguments:[{kind:"Argument",name:{kind:"Name",value:"targetPostId"},value:{kind:"Variable",name:{kind:"Name",value:"targetPostId"}}},{kind:"Argument",name:{kind:"Name",value:"targetAuthorId"},value:{kind:"Variable",name:{kind:"Name",value:"targetAuthorId"}}},{kind:"Argument",name:{kind:"Name",value:"alsoBlockAuthor"},value:{kind:"Variable",name:{kind:"Name",value:"alsoBlockAuthor"}}},{kind:"Argument",name:{kind:"Name",value:"reason"},value:{kind:"Variable",name:{kind:"Name",value:"reason"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"viewerEdge"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"isBlocking"}}]}}]}}]}}]}},17045:(e,n,i)=>{i.d(n,{M:()=>s});var t=i(5544),a=i(95420),l=i(96540),o=i(34317),d=i(91830),r=i(83573);function s(e){var n=e.viewerId,i=e.targetAuthorId,s=e.targetPostId,m=e.onOptimisticComplete,u=(0,d.zF)(),c=(0,o.$L)(),k=(0,a.n)(r.s),p=(0,t.A)(k,1)[0];return(0,l.useCallback)((function(e,t){p({variables:{targetAuthorId:i,targetPostId:s,alsoBlockAuthor:e,reason:t},onCompleted:function(){u({message:"Successfully reported post."}),c.event("post.flagged",{postId:s,reason:t})},onError:function(){u({message:"Unable to report this story. Please try again later."})},optimisticResponse:{__typename:"Mutation",reportStoryAndMaybeBlockAuthor:{__typename:"User",id:i,viewerEdge:{__typename:"UserViewerEdge",id:"userId:".concat(i,"-viewerId:").concat(n),isBlocking:e}}}}),null==m||m()}),[p,n,i,s,m])}},4369:(e,n,i)=>{i.d(n,{z:()=>F});var t,a=i(64467),l=i(5544),o=i(95420),d=i(96540),r=i(52764),s=i(14782),m=i(52290),u=i(86527),c=i(46445),k=i(20036),p=i(36557),v=i(91830);function N(){return N=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var i=arguments[n];for(var t in i)({}).hasOwnProperty.call(i,t)&&(e[t]=i[t])}return e},N.apply(null,arguments)}const S=function(e){return d.createElement("svg",N({xmlns:"http://www.w3.org/2000/svg",width:20,height:16,viewBox:"0 0 20 16"},e),t||(t=d.createElement("path",{d:"M0 .353v15.294h20V.353zm6.948 9.374L10 12.226l3.052-2.499 4.877 4.73H2.071zm-5.75 3.913V5.02l4.82 3.946zm12.784-4.675 4.82-3.946v8.621zm4.82-7.421v1.933L10 10.682 1.198 3.477V1.544z"})))};var g=i(60603),f={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"NewsletterV3EmailToSubscribersMenuItem_post"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Post"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"creator"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"newsletterV3"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"subscribersCount"}}]}}]}},{kind:"Field",name:{kind:"Name",value:"isNewsletter"}},{kind:"Field",name:{kind:"Name",value:"isAuthorNewsletter"}}]}}]},b={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"SendPostAsEmailsMutation"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"postId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"sendPostAsEmails"},arguments:[{kind:"Argument",name:{kind:"Name",value:"postId"},value:{kind:"Variable",name:{kind:"Name",value:"postId"}}}]}]}}]};function y(e,n){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),i.push.apply(i,t)}return i}function h(e){for(var n=1;n<arguments.length;n++){var i=null!=arguments[n]?arguments[n]:{};n%2?y(Object(i),!0).forEach((function(n){(0,a.A)(e,n,i[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):y(Object(i)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(i,n))}))}return e}function E(e){var n=e.post,i=e.onClick,t=e.menuStyle,a=(0,g.e)(!1),r=(0,l.A)(a,3),s=r[0],N=r[1],y=r[2],E=(0,v.zF)(),F=function(){y(),i()},C=(0,o.n)(b,{variables:{postId:(null==n?void 0:n.id)||""},onCompleted:function(e){var n=e.sendPostAsEmails;E(n?{message:"Your story has been emailed to subscribers.",toastStyle:"MESSAGE",duration:2e3}:{message:"We couldn't process your request. Try again, or contact our support team.",toastStyle:"ERROR",duration:2e3})},update:function(e,i){var t={id:"Post:".concat(null==n?void 0:n.id),fragment:f,fragmentName:"NewsletterV3EmailToSubscribersMenuItem_post"},a=e.readFragment(t);i.data&&a&&e.writeFragment(h(h({},t),{},{data:h(h({},a),{},{isAuthorNewsletter:i.data.sendPostAsEmails})}))}}),w=(0,l.A)(C,1)[0];return d.createElement(d.Fragment,null,d.createElement(m.a,{display:"inline-block"},"TEXT"===t?d.createElement(p.kZ,{scale:"M"},d.createElement(u.N,{"data-testid":"emailToSubscribersMenuItem",onClick:function(){null!=n&&n.isAuthorNewsletter?(E({message:"You’ve already sent this story to subscribers.",toastStyle:"ERROR",duration:2e3}),i()):N()}},"Email to subscribers")):d.createElement(u.N,{"data-testid":"emailToSubscribersMenuItem",onClick:function(){null!=n&&n.isAuthorNewsletter?(E({message:"You’ve already sent this story to subscribers.",toastStyle:"ERROR",duration:2e3}),i()):N()}},d.createElement(k.u,{icon:d.createElement(S,{"aria-label":"Email to subscribers"}),tooltipText:"Email to subscribers"}))),d.createElement(c.T,{onConfirm:function(){w(),F()},isVisible:s,hide:F,titleText:"Email to subscribers",confirmText:"Send",buttonStyle:"STRONG",buttonSize:"LARGE",showCancelButton:!0,withCloseButton:!0,isDestructiveAction:!1},"A link to this story will be emailed to all your subscribers."))}function F(e){var n=e.post,i=e.onClick,t=e.menuStyle,a=e.paddingLeftRight,l=void 0===a?"20px":a;return d.createElement(r.c,null,(function(e){var a,o,r;return e&&e.id===(null==n||null===(a=n.creator)||void 0===a?void 0:a.id)&&(null==n||!n.isNewsletter)&&((null==n||null===(o=n.creator)||void 0===o||null===(r=o.newsletterV3)||void 0===r?void 0:r.subscribersCount)||0)>0?d.createElement(s.q3,{paddingTopBottom:"8px",paddingLeftRight:l},d.createElement(E,{post:n,onClick:i,menuStyle:t})):null}))}},69415:(e,n,i)=>{i.d(n,{g:()=>k,y:()=>p});var t=i(5544),a=i(57746),l=i(96540),o=i(34317),d=i(49287),r=i(91830),s=i(66973),m=(0,l.createContext)({areHighlightsHidden:!1,toggleHideHighlights:function(){return null}}),u=new s.A("post-view-settings"),c="hide-highlights";function k(e){var n=e.postId,i=e.children,s=(0,l.useState)(!!u.get(c)),k=(0,t.A)(s,2),p=k[0],v=k[1],N=(0,r.zF)(),S=(0,o.$L)(),g=(0,d.jI)(),f=(0,l.useCallback)((function(e){u.set(c,e),v(e),S.event("displaySettings.highlights_from_others",{showHighlights:!e,postId:n,source:g})}),[n,g]),b=(0,l.useCallback)((function(){f(!p),N({message:"Highlights from others are ".concat(p?"visible":"hidden"," for you"),toastStyle:"MESSAGE",extraParams:{onClickUndo:function(){return f(p)},hideCloseButton:!0}})}),[p]),y=(0,l.useMemo)((function(){return{areHighlightsHidden:p,toggleHideHighlights:b}}),[p,b]);return(0,l.useEffect)((function(){var e=function(e){(0,a.Ay)("mod+/",e)&&b()};return document.addEventListener("keydown",e),function(){return document.removeEventListener("keydown",e)}}),[b]),l.createElement(m.Provider,{value:y},i)}var p=function(){return(0,l.useContext)(m)}},38714:(e,n,i)=>{i.d(n,{M:()=>t,b:()=>a});var t=function(e){return!!e&&(e.isAuroraVisible||"Collection"===e.__typename&&e.isAuroraEligible&&e.viewerEdge.isEditor)},a=function(e){return!!e&&("Collection"===e.__typename?e.isAuroraVisible||e.isAuroraEligible&&e.viewerEdge.isEditor:e.isAuroraVisible)}},89142:(e,n,i)=>{i.d(n,{L:()=>r,m:()=>s});var t=i(5544),a=i(95420),l=i(96540),o={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"SetPinnedAtMutation"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"postId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"collectionId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"pinnedAt"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Boolean"}}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"Field",name:{kind:"Name",value:"setPinnedAt"},arguments:[{kind:"Argument",name:{kind:"Name",value:"targetPostId"},value:{kind:"Variable",name:{kind:"Name",value:"postId"}}},{kind:"Argument",name:{kind:"Name",value:"targetCollectionId"},value:{kind:"Variable",name:{kind:"Name",value:"collectionId"}}},{kind:"Argument",name:{kind:"Name",value:"pinnedAt"},value:{kind:"Variable",name:{kind:"Name",value:"pinnedAt"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Post"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"collection"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}}]}},{kind:"Field",name:{kind:"Name",value:"pendingCollection"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}}]}},{kind:"Field",name:{kind:"Name",value:"pinnedAt"}}]}}]}}]}}]},d={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"PostSetPinnedByCreatorAtMutation"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"postId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"isPinned"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Boolean"}}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"setPostPinnedOnCreatorProfile"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"ObjectValue",fields:[{kind:"ObjectField",name:{kind:"Name",value:"targetPostId"},value:{kind:"Variable",name:{kind:"Name",value:"postId"}}},{kind:"ObjectField",name:{kind:"Name",value:"isPinned"},value:{kind:"Variable",name:{kind:"Name",value:"isPinned"}}}]}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}}]}}]}}]},r=function(e){var n=e.id,i=e.collection,d=e.pendingCollection,r=e.pinnedAt,s=(i||d||{id:""}).id,m=(0,a.n)(o,{optimisticResponse:{__typename:"Mutation",setPinnedAt:{__typename:"Post",id:n,collection:i,pendingCollection:d,pinnedAt:r?0:Date.now()}}}),u=(0,t.A)(m,1)[0],c=l.useCallback((function(){return u({variables:{postId:n,collectionId:s,pinnedAt:!r}})}),[n,s,r,u]);return[r,c]},s=function(e){var n=e.id,i=e.pinnedByCreatorAt,o=(0,a.n)(d,{optimisticResponse:{setPostPinnedOnCreatorProfile:{__typename:"MutationSuccess"}},update:function(e,t){var a;"MutationSuccess"===(null===(a=t.data)||void 0===a?void 0:a.setPostPinnedOnCreatorProfile.__typename)&&e.modify({id:"Post:".concat(n),fields:{pinnedByCreatorAt:function(){return i?0:Date.now()}}})}}),r=(0,t.A)(o,1)[0],s=l.useCallback((function(){return r({variables:{postId:n,isPinned:!i}})}),[n,r,i]);return[i,s]}},32038:(e,n,i)=>{i.d(n,{T:()=>a,e:()=>t});var t="This story is also a response to another story. Are you sure you want to delete this story?",a="This story is also a response to another story. Any edits are applied to both."},55981:(e,n,i)=>{i.d(n,{n:()=>d});var t=i(96540),a=i(44402),l=i(1417),o=function(e){return{"& path":{fill:e.colorTokens.foreground.error.primary.base}}},d=function(){var e=(0,a.l)();return t.createElement(l.A,{className:e(o)})}}}]);
//# sourceMappingURL=https://stats.medium.build/lite/sourcemaps/5660.9d03795a.chunk.js.map